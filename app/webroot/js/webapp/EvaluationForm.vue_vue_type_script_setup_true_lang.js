import{d as P,s as J,x as E,o as v,c as p,q as i,j as b,a as m,t as f,N as H,O as L,g as y,P as M,Q as q,_ as Q,I as z,J as A,u as D,B as G,f as K,R as W,p as g,F as X}from"./main.js";import{l as R}from"./lodash.js";const Y=["name","value","checked"],me=P({__name:"CustomHiddenField",props:{name:null,value:null,modelValue:null},setup(s){const c=s,a=J(c,"name"),{checked:S,handleChange:w}=E(a,void 0,{type:"hidden",checkedValue:c.value});return(x,$)=>(v(),p("input",{type:"hidden",name:i(a),value:c.value,checked:i(S)},null,8,Y))}}),Z=s=>(M("data-v-deffe746"),s=s(),q(),s),ee={class:"debugger"},ae={class:"flex justify-between items-center"},te={class:"text-teal-600 font-medium"},se=Z(()=>m("hr",null,null,-1)),oe={class:"flex justify-evenly space-x-4"},ne={key:0,class:"debug code flex-1 break-normal break-words break-all overflow-x"},le={key:1,class:"debug code flex-1 break-normal break-words break-all overflow-x"},re={key:2,class:"debug code flex-1 break-normal break-words break-all overflow-x"},ue=P({__name:"Debugger",props:{title:null,state:null,form:null,data:null},setup(s){const c=b(!1);function a(){c.value=!c.value}return(S,w)=>(v(),p("div",ee,[m("div",ae,[m("h3",te,f(s.title),1),m("button",{onClick:a},f(c.value?"Hide":"Show"),1)]),se,H(m("div",oe,[s.state?(v(),p("pre",ne,[m("code",null,f(JSON.stringify(s.state,null,2)),1)])):y("",!0),s.form?(v(),p("pre",le,[m("code",null,f(JSON.stringify(s.form,null,2)),1)])):y("",!0),s.data?(v(),p("pre",re,[m("code",null,f(JSON.stringify(s.data,null,2)),1)])):y("",!0)],512),[[L,c.value]])]))}});const _=Q(ue,[["__scopeId","data-v-deffe746"]]),ie={key:1},ve=P({__name:"EvaluationForm",props:{evaluation:null,initialState:null},emits:["submit","save"],setup(s,{emit:c}){var N;const a=s,S=z(),{values:w,errors:x,meta:$,handleSubmit:T,isSubmitting:V}=A({initialValues:(N=a.initialState)==null?void 0:N.data}),C=b(!1),k=b(!1),h=b(),F=b({});function B({errors:l}){var t;const n=Object.keys(l)[0],e=document.getElementById(n);(t=e==null?void 0:e.focus)==null||t.call(e),e==null||e.scrollIntoView({behavior:"smooth"})}const I=T(async()=>{var l,n,e;d({});try{const t=new FormData(h.value);t.append("_method","POST");const r=new URLSearchParams;for(const u of t)r.append(u[0],u[1]);const o=await D(`/evaluations/makeEvaluation/${(l=a.evaluation)==null?void 0:l.id}/${(e=(n=a.evaluation)==null?void 0:n.group)==null?void 0:e.id}`,{method:"POST",timeout:300,body:r});await d({message:o.message,type:o.statusText}),o.status===200&&await S.push({name:"dashboard"})}catch(t){d({message:t.message,type:"error"})}},B);async function U(){var l,n,e;d({});try{const t=new FormData(h.value);t.append("_method","PUT");const r=new URLSearchParams;for(const u of t)r.append(u[0],u[1]);const o=await D(`/evaluations/makeEvaluation/${(l=a.evaluation)==null?void 0:l.id}/${(e=(n=a.evaluation)==null?void 0:n.group)==null?void 0:e.id}`,{method:"POST",timeout:300,body:r});await d({message:o.message,type:o.statusText})}catch{await d({message:"something went wrong...",type:"error"})}}function d(l){F.value=l}return G(()=>R.exports.cloneDeep(a.initialState),R.exports.debounce(async(l,n)=>{var e,t,r;d({});try{const o=new FormData(h.value);o.append("_method","PUT");const u=new URLSearchParams;for(const O of o)u.append(O[0],O[1]);const j=await D(`/evaluations/makeEvaluation/${(e=a.evaluation)==null?void 0:e.id}/${(r=(t=a.evaluation)==null?void 0:t.group)==null?void 0:r.id}`,{method:"POST",timeout:300,body:u});d({message:j.message,type:"success"})}catch(o){d({message:o.message,type:"error"})}},5e3),{deep:!0}),(l,n)=>{var e,t,r,o;return v(),p(X,null,[m("form",{novalidate:"",onSubmit:n[0]||(n[0]=W((...u)=>i(I)&&i(I)(...u),["prevent"])),id:"evaluation_form",class:"evaluation-form",ref_key:"evaluation_form",ref:h},[K(l.$slots,"default",{evaluationRef:h.value,onSave:U,isSubmitting:i(V),errors:i(x),values:i(w),formMeta:i($),message:F.value})],544),C.value?(v(),p("button",{key:0,class:"debugger button default",onClick:n[1]||(n[1]=u=>k.value=!k.value)},f(k.value?"Hide":"Show")+" Debugger",1)):y("",!0),k.value?(v(),p("div",ie,[g(_,{title:"Form Values/Errors",state:i(w),form:i(x)},null,8,["state","form"]),g(_,{title:"InitialState",state:a.initialState},null,8,["state"]),g(_,{title:"Evaluation",state:a.evaluation},null,8,["state"]),g(_,{title:"Simple/Rubric/Mixed",state:((e=a.evaluation)==null?void 0:e.simple)||((t=a.evaluation)==null?void 0:t.rubric)||((r=a.evaluation)==null?void 0:r.mixed)},null,8,["state"]),g(_,{title:"Response",state:(o=a.evaluation)==null?void 0:o.response},null,8,["state"])])):y("",!0)],64)}}});export{me as _,ve as a};
