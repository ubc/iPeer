import{_ as U,o as d,c as h,a as w,d as R,k as o,h as z,i as g,m as k,C as N,q as u,g as $,D as G,H as J,j as C,s as T,r as K,L as X,w as B,f as Q,p as r,e as A,F as I}from"./main.js";import{l as m}from"./lodash.js";import{C as s,E as Y}from"./EvaluationForm.js";import{_ as F}from"./TakeNote.js";import{S as Z}from"./SectionSubtitle.js";import"./_commonjsHelpers.js";import"./sweetalert.min.js";const ee={},te={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},ae=w("g",{id:"line"},[w("path",{d:"m21.49 62.77c3.309 0 6-2.691 6-6s-2.691-6-6-6-6 2.691-6 6 2.691 6 6 6zm0-10c2.206 0 4 1.794 4 4 0 2.206-1.794 4-4 4-2.206 0-4-1.794-4-4 0-2.206 1.794-4 4-4z"}),w("path",{d:"m12.36 66.78c1.728 0 3.135-1.406 3.135-3.135s-1.406-3.135-3.135-3.135-3.135 1.406-3.135 3.135 1.406 3.135 3.135 3.135zm0-4.27c0.6255 0 1.135 0.5088 1.135 1.135 0 0.6259-0.5093 1.135-1.135 1.135s-1.135-0.5088-1.135-1.135c0-0.626 0.5092-1.135 1.135-1.135z"}),w("path",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",d:"m17.49 48.58c-1.042-1.779-1.544-3.895-1.31-6.103 0.0786-0.7397 0.2418-1.449 0.4687-2.126-4.569-1.322-7.676-5.758-7.156-10.65 0.5836-5.492 5.509-9.471 11-8.887 0.881 0.0936 1.717 0.3098 2.508 0.6113 1.407-7.636 8.471-13.02 16.32-12.19 6.706 0.7126 11.91 5.74 13.14 12.03 0.3856-0.0038 0.7741 0.0084 1.167 0.0501 5.492 0.5836 9.471 5.509 8.887 11-0.3338 3.141-2.091 5.782-4.558 7.363 0.0658 0.8881 0.066 1.792-0.0315 2.709-0.8755 8.238-8.263 14.21-16.5 13.33-3.578-0.3802-6.725-1.991-9.072-4.364-0.8269 0.6584-1.757 1.187-2.758 1.559"})],-1),ie=[ae];function ne(E,L){return d(),h("svg",te,ie)}const ue=U(ee,[["render",ne],["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/icons/IconThoughtBubble.vue"]]),re=R({__name:"MixedEvaluationPeerQuestions",props:{members:{type:Array,required:!0},currentUser:{type:null,required:!0},evaluation:{type:null,required:!0},question:{type:null,required:!0},initialState:{type:null,required:!0}},emits:["update:initialState","update:modelValue"],setup(E,{emit:L}){const n=E,x=o(()=>{var t;if((t=n.question)!=null&&t.type)return z({loader:()=>{var i;return F(Object.assign({"../../questions/PeerMixedCommentQuestion.vue":()=>g(()=>import("./PeerMixedCommentQuestion.js"),["js/vue/PeerMixedCommentQuestion.js","js/vue/main.js","css/vue/main.css"]),"../../questions/PeerMixedLikertQuestion.vue":()=>g(()=>import("./PeerMixedLikertQuestion.js"),["js/vue/PeerMixedLikertQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/lodash.js","js/vue/_commonjsHelpers.js","js/vue/rules.js","js/vue/index2.js","js/vue/UserCard.js","js/vue/EvaluationForm.js","css/vue/EvaluationForm.css","js/vue/sweetalert.min.js","js/vue/CustomRadioField.js"]),"../../questions/PeerMixedParagraphQuestion.vue":()=>g(()=>import("./PeerMixedParagraphQuestion.js"),["js/vue/PeerMixedParagraphQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/lodash.js","js/vue/_commonjsHelpers.js","js/vue/rules.js","js/vue/index2.js","js/vue/CustomTextField.js","js/vue/autosize.esm.js","js/vue/UserCard.js"]),"../../questions/PeerMixedRangeQuestion.vue":()=>g(()=>import("./PeerMixedRangeQuestion.js"),["js/vue/PeerMixedRangeQuestion.js","js/vue/main.js","css/vue/main.css"]),"../../questions/PeerMixedSentenceQuestion.vue":()=>g(()=>import("./PeerMixedSentenceQuestion.js"),["js/vue/PeerMixedSentenceQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/lodash.js","js/vue/_commonjsHelpers.js","js/vue/rules.js","js/vue/index2.js","js/vue/CustomInputField.js","js/vue/UserCard.js"])}),`../../questions/PeerMixed${(i=n.question)==null?void 0:i.type}Question.vue`)},loadingComponent:'<div class="w-full h-128 bg-gold-100">L O A D I N G...</div>'})});return(t,i)=>n.question?(d(),k(N(u(x)),{key:0,question:n.question,evaluation:n.evaluation,members:n.members,"initial-state":n.initialState,"onUpdate:initialState":i[0]||(i[0]=v=>t.$emit("update:initialState",v))},null,40,["question","evaluation","members","initial-state"])):$("v-if",!0)}}),se=U(re,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/renderer/MixedEvaluationPeerQuestions.vue"]]),le=R({__name:"MixedEvaluationSelfQuestions",props:{currentUser:{type:null,required:!0},evaluation:{type:null,required:!0},question:{type:null,required:!0},initialState:{type:null,required:!0}},emits:["update:initialState","update:modelValue"],setup(E,{emit:L}){const n=E,x=o(()=>{var t;if((t=n.question)!=null&&t.type)return z({loader:()=>{var i;return F(Object.assign({"../../questions/SelfMixedLikertQuestion.vue":()=>g(()=>import("./SelfMixedLikertQuestion.js"),["js/vue/SelfMixedLikertQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/index2.js","js/vue/_commonjsHelpers.js","js/vue/autosize.esm.js","js/vue/CustomRadioField.js","js/vue/EvaluationForm.js","css/vue/EvaluationForm.css","js/vue/lodash.js","js/vue/sweetalert.min.js"]),"../../questions/SelfMixedParagraphQuestion.vue":()=>g(()=>import("./SelfMixedParagraphQuestion.js"),["js/vue/SelfMixedParagraphQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/index2.js","js/vue/_commonjsHelpers.js","js/vue/CustomTextField.js","js/vue/autosize.esm.js","js/vue/lodash.js"]),"../../questions/SelfMixedSentenceQuestion.vue":()=>g(()=>import("./SelfMixedSentenceQuestion.js"),["js/vue/SelfMixedSentenceQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/index2.js","js/vue/_commonjsHelpers.js","js/vue/autosize.esm.js","js/vue/CustomInputField.js","js/vue/lodash.js"])}),`../../questions/SelfMixed${(i=n.question)==null?void 0:i.type}Question.vue`)},loadingComponent:'<div class="w-full h-128 bg-gold-100">L O A D I N G...</div>'})});return(t,i)=>n.question?(d(),k(N(u(x)),{key:0,question:n.question,evaluation:n.evaluation,"current-user":n.currentUser,"initial-state":n.initialState,"onUpdate:initialState":i[0]||(i[0]=v=>t.$emit("update:initialState",v))},null,40,["question","evaluation","current-user","initial-state"])):$("v-if",!0)}}),oe=U(le,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/renderer/MixedEvaluationSelfQuestions.vue"]]),de={class:"self-evaluation my-8 space-y-8"},ve=R({__name:"MixedEvaluation",props:{members:{type:Array,required:!0},currentUser:{type:null,required:!0},evaluation:{type:null,required:!0}},emits:["fetch:evaluation"],setup(E,{emit:L}){const n=E;G(),J(),C(null);const x=T(n,"members"),t=T(n,"evaluation"),i=K({event_id:o(()=>{var e;return(e=t.value)==null?void 0:e.id}),group_id:o(()=>{var e,a;return(a=(e=t.value)==null?void 0:e.group)==null?void 0:a.id}),course_id:o(()=>{var e,a;return(a=(e=t.value)==null?void 0:e.course)==null?void 0:a.id}),group_event_id:o(()=>{var e;return(e=t.value)==null?void 0:e.group_event_id}),template_id:o(()=>{var e;return(e=t.value)==null?void 0:e.template_id}),member_count:o(()=>{var e,a;return(a=(e=t.value)==null?void 0:e.members)==null?void 0:a.length}),user_id:o(()=>{var e;return(e=n.currentUser)==null?void 0:e.id}),evaluatee_count:o(()=>{var e,a;return(a=(e=t.value)==null?void 0:e.members)==null?void 0:a.length}),member_ids:o(()=>{var e;return m.exports.map((e=t.value)==null?void 0:e.members,a=>a.id)})}),v=C({}),W=o(()=>{var e,a;return m.exports.filter((a=(e=t.value)==null?void 0:e.review)==null?void 0:a.data,{self_eval:!1})}),H=o(()=>{var e,a;return m.exports.filter((a=(e=t.value)==null?void 0:e.review)==null?void 0:a.data,{self_eval:!0})});function D(){var e,a;return{id:"",submitter_id:(e=t.value)==null?void 0:e.id,submitted:null,date_submitted:"",data:m.exports.map((a=n.evaluation)==null?void 0:a.members,l=>{var P,S,q;return{evaluator:n.currentUser.id,evaluatee:l.id,score:"",comment_release:"",grade_release:"",details:(q=m.exports.map((S=(P=t.value)==null?void 0:P.review)==null?void 0:S.data,b=>({evaluation_mixeval_id:"",question_number:b==null?void 0:b.question_num,question_comment:null,selected_lom:null,grade:"",comment_release:"0",record_status:"A"})))!=null?q:[]}})}}function V(e){var b,O,p;const a=(b=t.value)==null?void 0:b.review,l=m.exports.find(a==null?void 0:a.data,{question_num:e.question_num}),P=m.exports.isEmpty(v.value)?{}:(O=v.value)==null?void 0:O.data,S=m.exports.find(P,{evaluatee:e.member_id}).details,q=m.exports.find(S,{question_number:e.question_num});if(((p=e==null?void 0:e.event)==null?void 0:p.key)==="selected_lom"){const c=Math.pow(10,1),y=parseInt(l==null?void 0:l.multiplier)/((l==null?void 0:l.loms.length)-parseInt(a==null?void 0:a.zero_mark))*parseInt(e.event.value);Object.assign(q,{[e.event.key]:e.event.value,grade:Math.floor(y*c)/c})}else if(e.event.key==="question_comment")Object.assign(q,{[e.event.key]:e.event.value});else return}return X(()=>{var e,a,l;((e=t.value)==null?void 0:e.response)&&!m.exports.isEmpty((a=t.value)==null?void 0:a.response)?v.value=Object.assign(D(),u((l=t.value)==null?void 0:l.response)):v.value=D()}),(e,a)=>(d(),k(Y,{onSubmit:e.onSubmit,"initial-state":v.value,evaluation:n.evaluation},{default:B(({onSave:l,errors:P,values:S,isSubmitting:q,evaluationRef:b,formMeta:O})=>[Q(e.$slots,"header",{},()=>{var p,c,y,f,M,j;return[r(s,{name:"data[data][submitter_id]",value:i.user_id},null,8,["value"]),r(s,{name:"data[data][event_id]",value:i.event_id},null,8,["value"]),r(s,{name:"data[data][template_id]",value:i.template_id},null,8,["value"]),r(s,{name:"data[data][grp_event_id]",value:i.group_event_id},null,8,["value"]),r(s,{name:"data[data][members]",value:i.member_count},null,8,["value"]),u(m.exports.findIndex)((c=(p=u(t))==null?void 0:p.review)==null?void 0:c.data,_=>_.type==="Likert")!==-1?(d(!0),h(I,{key:0},A((y=u(t))==null?void 0:y.members,_=>(d(),h(I,{key:_.id},[r(s,{name:`data[${_.id}][Evaluation][evaluatee_id]`,value:_.id},null,8,["name","value"]),r(s,{name:`data[${_.id}][Evaluation][evaluator_id]`,value:i.user_id},null,8,["name","value"]),r(s,{name:`data[${_.id}][Evaluation][event_id]`,value:i.event_id},null,8,["name","value"]),r(s,{name:`data[${_.id}][Evaluation][group_event_id]`,value:i.group_event_id},null,8,["name","value"]),r(s,{name:`data[${_.id}][Evaluation][group_id]`,value:i.group_id},null,8,["name","value"])],64))),128)):$("v-if",!0),parseInt((f=u(t))==null?void 0:f.self_eval)&&parseInt((j=(M=u(t))==null?void 0:M.review)==null?void 0:j.self_eval)>0?(d(),h(I,{key:1},[r(s,{name:`data[${i.user_id}][Self-Evaluation][evaluatee_id]`,value:i.user_id},null,8,["name","value"]),r(s,{name:`data[${i.user_id}][Self-Evaluation][evaluator_id]`,value:i.user_id},null,8,["name","value"]),r(s,{name:`data[${i.user_id}][Self-Evaluation][event_id]`,value:i.event_id},null,8,["name","value"]),r(s,{name:`data[${i.user_id}][Self-Evaluation][group_event_id]`,value:i.group_event_id},null,8,["name","value"]),r(s,{name:`data[${i.user_id}][Self-Evaluation][group_id]`,value:i.group_id},null,8,["name","value"])],64)):$("v-if",!0)]}),Q(e.$slots,"main",{},()=>{var p,c,y;return[(d(!0),h(I,null,A(u(W),f=>(d(),k(se,{key:f.id,members:u(x),question:f,evaluation:u(t),"initial-state":v.value,"current-user":n.currentUser,"onUpdate:initialState":V},null,8,["members","question","evaluation","initial-state","current-user"]))),128)),parseInt((p=u(t))==null?void 0:p.self_eval)&&parseInt((y=(c=u(t))==null?void 0:c.review)==null?void 0:y.self_eval)>0?(d(),k(Z,{key:0,subtitle:"Evaluate yourself",icon:{src:u(ue),size:"3rem"}},{default:B(()=>[w("div",de,[(d(!0),h(I,null,A(u(H),(f,M)=>(d(),k(oe,{key:f.id,idx:M,question:f,evaluation:u(t),"initial-state":v.value,"current-user":n.currentUser,"onUpdate:initialState":V},null,8,["idx","question","evaluation","initial-state","current-user"]))),128))])]),_:1},8,["icon"])):$("v-if",!0)]}),Q(e.$slots,"footer"),Q(e.$slots,"cta",{onSave:l,isSubmitting:q,values:S})]),_:3},8,["onSubmit","initial-state","evaluation"]))}}),be=U(ve,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/MixedEvaluation.vue"]]);export{be as default};
//# sourceMappingURL=MixedEvaluation.js.map
