import{_ as U,o as d,c as m,a as n,d as D,k as l,h as c,i as p,M as B,t as V,g as P,m as v,z as M,q as t,v as C,D as F,L as W,j as N,s as G,r as H,w as T,f as S,e as j,F as q}from"./main.js";import{l as x}from"./lodash.js";import{a as L,b as A,d as J,c as I}from"./array.js";import{S as K}from"./SectionSubtitle.js";import{E as X}from"./EvaluationForm.js";import"./_commonjsHelpers.js";import"./sweetalert.min.js";import"./Debugger.js";const Y={},Z={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},ee=n("g",{id:"line"},[n("path",{d:"m21.49 62.77c3.309 0 6-2.691 6-6s-2.691-6-6-6-6 2.691-6 6 2.691 6 6 6zm0-10c2.206 0 4 1.794 4 4 0 2.206-1.794 4-4 4-2.206 0-4-1.794-4-4 0-2.206 1.794-4 4-4z"}),n("path",{d:"m12.36 66.78c1.728 0 3.135-1.406 3.135-3.135s-1.406-3.135-3.135-3.135-3.135 1.406-3.135 3.135 1.406 3.135 3.135 3.135zm0-4.27c0.6255 0 1.135 0.5088 1.135 1.135 0 0.6259-0.5093 1.135-1.135 1.135s-1.135-0.5088-1.135-1.135c0-0.626 0.5092-1.135 1.135-1.135z"}),n("path",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",d:"m17.49 48.58c-1.042-1.779-1.544-3.895-1.31-6.103 0.0786-0.7397 0.2418-1.449 0.4687-2.126-4.569-1.322-7.676-5.758-7.156-10.65 0.5836-5.492 5.509-9.471 11-8.887 0.881 0.0936 1.717 0.3098 2.508 0.6113 1.407-7.636 8.471-13.02 16.32-12.19 6.706 0.7126 11.91 5.74 13.14 12.03 0.3856-0.0038 0.7741 0.0084 1.167 0.0501 5.492 0.5836 9.471 5.509 8.887 11-0.3338 3.141-2.091 5.782-4.558 7.363 0.0658 0.8881 0.066 1.792-0.0315 2.709-0.8755 8.238-8.263 14.21-16.5 13.33-3.578-0.3802-6.725-1.991-9.072-4.364-0.8269 0.6584-1.757 1.187-2.758 1.559"})],-1),te=[ee];function ae(u,h){return d(),m("svg",Z,te)}const ie=U(Y,[["render",ae],["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/icons/IconThoughtBubble.vue"]]),ne={class:"question"},se={key:0,class:"text-red-500"},ue={class:"description text-sm text-slate-900 leading-relaxed mx-4 mb-2"},re=D({__name:"MixedEvaluationPeerQuestions",props:{question:{type:Object,required:!0},form:{type:Object,required:!0},members:{type:Array,required:!0}},emits:["update:form","update:modelValue"],setup(u,{emit:h}){const r=u,s=l(()=>{var o;switch((o=r.question)==null?void 0:o.type){case"Likert":return c(()=>p(()=>import("./PeerMixedLikertQuestion.js"),["js/vue/PeerMixedLikertQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css","js/vue/UserCard.js","js/vue/InputText.js"]));case"Range":return c(()=>p(()=>import("./PeerMixedRangeQuestion.js"),["js/vue/PeerMixedRangeQuestion.js","js/vue/main.js","css/vue/main.css"]));case"Comment":return c(()=>p(()=>import("./PeerMixedCommentQuestion.js"),["js/vue/PeerMixedCommentQuestion.js","js/vue/main.js","css/vue/main.css"]));case"Sentence":return c(()=>p(()=>import("./PeerMixedSentenceQuestion.js"),["js/vue/PeerMixedSentenceQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css","js/vue/UserCard.js"]));case"Paragraph":return c(()=>p(()=>import("./PeerMixedParagraphQuestion.js"),["js/vue/PeerMixedParagraphQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css","js/vue/UserCard.js"]))}});function a(o){h("update:form",o)}return(o,b)=>(d(),m("div",{class:C(`datatable question_${u.question.question_num} mx-4`)},[n("div",ne,[B(V(u.question.question_num)+". "+V(u.question.title)+" ",1),u.question.required?(d(),m("span",se,"*")):P("v-if",!0)]),n("div",ue,V(u.question.instructions),1),(d(),v(M(t(s)),{members:r.members,question:r.question,"initial-state":r.initialState,"onUpdate:form":a},null,40,["members","question","initial-state"]))],2))}}),oe=U(re,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/MixedEvaluationPeerQuestions.vue"]]),le=D({__name:"MixedEvaluationSelfQuestions",props:{question:{type:Object,required:!0},currentUser:{type:Object,required:!0},initialState:{type:Object,required:!0}},emits:["update:form","update:modelValue"],setup(u,{emit:h}){const r=u,s=l(()=>{var o;switch((o=r.question)==null?void 0:o.type){case"Likert":return c(()=>p(()=>import("./SelfMixedLikertQuestion.js"),["js/vue/SelfMixedLikertQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css"]));case"Sentence":return c(()=>p(()=>import("./SelfMixedSentenceQuestion.js"),["js/vue/SelfMixedSentenceQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css"]));case"Paragraph":return c(()=>p(()=>import("./SelfMixedParagraphQuestion.js"),["js/vue/SelfMixedParagraphQuestion.js","js/vue/main.js","css/vue/main.css","js/vue/rules.js","js/vue/array.js","js/vue/_commonjsHelpers.js","js/vue/CustomVeeField.js","js/vue/InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js","css/vue/InputText.css"]))}});function a(o){h("update:form",o)}return(o,b)=>u.question?(d(),v(M(t(s)),{key:0,question:u.question,"current-user":u.currentUser,"initial-state":u.initialState,"onUpdate:form":a},null,40,["question","current-user","initial-state"])):P("v-if",!0)}}),de=U(le,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/MixedEvaluationSelfQuestions.vue"]]),_e=["value"],me=["value"],ce=["value"],pe=["value"],ve=["value"],he=["name","value"],fe=["name","value"],ye=["name","value"],Ee=["name","value"],qe=["name","value"],be=["name","value"],ge=["name","value"],$e=["name","value"],ke=["name","value"],we=["name","value"],Se={class:"self-evaluation my-8 space-y-8"},xe=D({__name:"MixedEvaluation",props:{currentUser:{type:null,required:!0},evaluation:{type:null,required:!0}},emits:["fetch:evaluation"],setup(u,{emit:h}){const r=u;F(),W(),N();const s=G(r,"evaluation");let a=H({event_id:l(()=>{var e;return(e=s.value)==null?void 0:e.id}),group_id:l(()=>{var e,i;return(i=(e=s.value)==null?void 0:e.group)==null?void 0:i.id}),course_id:l(()=>{var e,i;return(i=(e=s.value)==null?void 0:e.course)==null?void 0:i.id}),group_event_id:l(()=>{var e;return(e=s.value)==null?void 0:e.group_event_id}),template_id:l(()=>{var e;return(e=s.value)==null?void 0:e.template_id}),member_count:l(()=>{var e,i;return(i=(e=s.value)==null?void 0:e.members)==null?void 0:i.length}),user_id:l(()=>{var e;return(e=r.currentUser)==null?void 0:e.id}),evaluatee_count:l(()=>{var e,i;return(i=(e=s.value)==null?void 0:e.members)==null?void 0:i.length}),member_ids:l(()=>{var e;return x.exports.map((e=s.value)==null?void 0:e.members,i=>i.id)})});const o=l(()=>{var e,i,g,O,$,k,R;return((i=(e=s.value)==null?void 0:e.review)==null?void 0:i.response)&&!x.exports.isEmpty((O=(g=s.value)==null?void 0:g.review)==null?void 0:O.response)?t((k=($=s.value)==null?void 0:$.review)==null?void 0:k.response):{submitter_id:(R=s.value)==null?void 0:R.id,submitted:null,date_submitted:"",data:{points:[],comments:[]}}}),b=l(()=>{var e,i;return x.exports.filter((i=(e=s.value)==null?void 0:e.review)==null?void 0:i.data,{self_eval:!1})}),Q=l(()=>{var e,i;return x.exports.filter((i=(e=s.value)==null?void 0:e.review)==null?void 0:i.data,{self_eval:!0})}),z=L({response:A().of(L({data:A().of(L({lom:J().required(),sentence:I().required().min(10),paragraph:I().required().min(10)}))}))});return(e,i)=>(d(),v(X,{onSubmit:e.onSubmit,"initial-state":t(o),"validation-schema":t(z),evaluation:r.evaluation},{default:T(({onSave:g,errors:O,values:$,isSubmitting:k,evaluationRef:R})=>[S(e.$slots,"header",{},()=>{var f,y;return[n("input",{type:"hidden",name:"data[data][submitter_id]",value:t(a).user_id},null,8,_e),n("input",{type:"hidden",name:"data[data][event_id]",value:t(a).event_id},null,8,me),n("input",{type:"hidden",name:"data[data][template_id]",value:t(a).template_id},null,8,ce),n("input",{type:"hidden",name:"data[data][grp_event_id]",value:t(a).group_event_id},null,8,pe),n("input",{type:"hidden",name:"data[data][members]",value:t(a).member_count},null,8,ve),(d(!0),m(q,null,j((f=t(s))==null?void 0:f.members,_=>(d(),m(q,{key:_.id},[n("input",{type:"hidden",name:`data[${_.id}][Evaluation][evaluatee_id]`,value:_.id},null,8,he),n("input",{type:"hidden",name:`data[${_.id}][Evaluation][evaluator_id]`,value:t(a).user_id},null,8,fe),n("input",{type:"hidden",name:`data[${_.id}][Evaluation][event_id]`,value:t(a).event_id},null,8,ye),n("input",{type:"hidden",name:`data[${_.id}][Evaluation][group_event_id]`,value:t(a).group_event_id},null,8,Ee),n("input",{type:"hidden",name:`data[${_.id}][Evaluation][group_id]`,value:t(a).group_id},null,8,qe)],64))),128)),(y=t(b))!=null&&y.length?(d(),m(q,{key:0},[n("input",{type:"hidden",name:`data[${t(a).user_id}][Self-Evaluation][evaluatee_id]`,value:t(a).user_id},null,8,be),n("input",{type:"hidden",name:`data[${t(a).user_id}][Self-Evaluation][evaluator_id]`,value:t(a).user_id},null,8,ge),n("input",{type:"hidden",name:`data[${t(a).user_id}][Self-Evaluation][event_id]`,value:t(a).event_id},null,8,$e),n("input",{type:"hidden",name:`data[${t(a).user_id}][Self-Evaluation][group_event_id]`,value:t(a).group_event_id},null,8,ke),n("input",{type:"hidden",name:`data[${t(a).user_id}][Self-Evaluation][group_id]`,value:t(a).group_id},null,8,we)],64)):P("v-if",!0)]}),S(e.$slots,"main",{},()=>{var f,y,_;return[(d(!0),m(q,null,j(t(b),E=>{var w;return d(),v(oe,{key:E.id,members:(w=r.evaluation)==null?void 0:w.members,question:E,"initial-state":t(o),"current-user":r.currentUser,"onUpdate:form":e.updateForm},null,8,["members","question","initial-state","current-user","onUpdate:form"])}),128)),((f=t(s))==null?void 0:f.self_eval)&&((_=(y=t(s))==null?void 0:y.review)==null?void 0:_.self_eval)>0?(d(),v(K,{key:0,subtitle:"Evaluate yourself",icon:{src:t(ie),size:"3rem"}},{default:T(()=>[n("div",Se,[(d(!0),m(q,null,j(t(Q),(E,w)=>(d(),v(de,{key:E.id,idx:w,question:E,"initial-state":r.initialState,"current-user":r.currentUser,"onUpdate:form":e.updateForm},null,8,["idx","question","initial-state","current-user","onUpdate:form"]))),128))])]),_:1},8,["icon"])):P("v-if",!0)]}),S(e.$slots,"footer"),S(e.$slots,"cta",{onSave:g,isSubmitting:k,values:$})]),_:3},8,["onSubmit","initial-state","validation-schema","evaluation"]))}}),Te=U(xe,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/MixedEvaluation.vue"]]);export{Te as default};
//# sourceMappingURL=MixedEvaluation.js.map
