{"version":3,"file":"SubmissionIndex.js","sources":["../../../../vue-ts-ipeer/src/pages/SubmissionIndex.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { ref, reactive, watch, computed, onMounted } from 'vue';\nimport { useRoute } from 'vue-router'\nimport useFetch from '@/composables/useFetch'\nimport Loader from '@/components/Loader.vue'\nimport PageTitle from '@/components/PageTitle.vue'\nimport ViewHeading from '@/student/components/ViewHeading.vue'\nimport { IconTwoUsers } from '@/components/icons'\n\nimport type { IUser, IEvaluation } from '@/types/typings'\n// REFERENCES\nconst emit              = defineEmits<{}>()\nconst props             = defineProps<{\n  currentUser: IUser\n}>()\nconst route             = useRoute()\n// DATA\nconst event_id          = ref(route.params.event_id)\nconst group_id          = ref(route.params.group_id)\nconst status            = ref<string>('')\nconst message           = ref<object|null>(null)\nconst reviews           = reactive({'id': 'work in progress'})\nlet evaluation          = reactive<IEvaluation|any>({})\nconst members           = ref<IUser[]>([])\n// COMPUTED\n// METHODS\nasync function fetchEvaluation() {\n  try {\n    status.value = 'PENDING'\n    const response: Promise<IEvaluation | unknown> = await useFetch(\n        `/evaluations/makeEvaluation/${event_id.value}/${group_id.value}`,\n        {method: 'GET', timeout: 0})\n    await Object.assign(evaluation, response?.data)\n  } catch (err) {\n    message.value = {text: err, type: 'error'}\n  } finally {\n    status.value = 'READY'\n  }\n}\n// WATCH\n// LIFECYCLE\nonMounted(async () => {\n  await fetchEvaluation()\n  console.log({'evaluation': evaluation})\n})\n</script>\n\n<template>\n  <template v-if=\"status === 'PENDING'\">\n    <Loader />\n  </template>\n\n  <template v-else>\n    <PageTitle :title=\"evaluation?.title\">\n      <ViewHeading\n          :due-date=\"evaluation?.due_date\"\n          :penalties=\"evaluation?.penalty\"\n          :group-name=\"evaluation?.group?.name\"\n          :course-title=\"evaluation?.course?.title\"\n          :icon=\"{src: IconTwoUsers, size: '6rem'}\"\n      />\n    </PageTitle>\n\n    <Suspense>\n      <router-view\n          class=\"tab-pane fade show active\"\n          id=\"response\"\n          role=\"tabpanel\"\n          aria-labelledby=\"response-tab\"\n          :current-user=\"currentUser\"\n          :members=\"members\"\n          :evaluation=\"evaluation\"\n          :reviews=\"reviews\"\n          @fetch:evaluation=\"fetchEvaluation\">\n      </router-view>\n    </Suspense>\n  </template>\n</template>\n"],"names":["route","useRoute","event_id","ref","group_id","status","message","reviews","reactive","evaluation","members","fetchEvaluation","response","useFetch","err","onMounted"],"mappings":"uXAeA,MAAMA,EAAoBC,IAEpBC,EAAoBC,EAAIH,EAAM,OAAO,QAAQ,EAC7CI,EAAoBD,EAAIH,EAAM,OAAO,QAAQ,EAC7CK,EAAoBF,EAAY,EAAE,EAClCG,EAAoBH,EAAiB,IAAI,EACzCI,EAAoBC,EAAS,CAAC,GAAM,kBAAmB,CAAA,EACzD,IAAAC,EAAsBD,EAA0B,CAAA,CAAE,EAChD,MAAAE,EAAoBP,EAAa,CAAA,CAAE,EAGzC,eAAeQ,GAAkB,CAC3B,GAAA,CACFN,EAAO,MAAQ,UACf,MAAMO,EAA2C,MAAMC,EACnD,+BAA+BX,EAAS,SAASE,EAAS,QAC1D,CAAC,OAAQ,MAAO,QAAS,CAAC,CAAA,EAC9B,MAAM,OAAO,OAAOK,EAAYG,GAAA,YAAAA,EAAU,IAAI,QACvCE,GACPR,EAAQ,MAAQ,CAAC,KAAMQ,EAAK,KAAM,QAAO,QACzC,CACAT,EAAO,MAAQ,OACjB,CACF,CAGA,OAAAU,EAAU,SAAY,CACpB,MAAMJ,EAAgB,EACtB,QAAQ,IAAI,CAAC,WAAcF,CAAW,CAAA,CAAA,CACvC"}