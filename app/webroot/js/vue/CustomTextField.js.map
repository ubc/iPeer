{"version":3,"file":"CustomTextField.js","sources":["../../../../vue-ts-ipeer/src/components/fields/CustomTextField.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { ref, toRef, onMounted, onBeforeUnmount } from 'vue'\nimport { useField, ErrorMessage } from 'vee-validate'\nimport autosize from 'autosize'\n\n// REFERENCES\nconst emit = defineEmits<{\n  (e: 'update:modelValue', option: string): void\n  (e: 'update:event', option: string): void\n}>()\ninterface Props {\n  label?: string\n  name: string\n  value?: null\n  modelValue?: null\n  rules?: string|object\n  default?: string\n  disabled?: boolean\n}\nconst props = withDefaults(defineProps<Props>(), {\n  disabled: false,\n  rules: undefined\n})\nconst name        = toRef(props, 'name');\nconst { value: inputValue, handleChange, errorMessage, handleBlur, meta } = useField(name, props.rules, {\n  type: 'textarea',\n  initialValue: props.value,\n  validateOnValueUpdate: false\n});\n// DATA\nconst elementRef  = ref()\nconst defaultValue = ref(props.default)\nconst validationListeners = {\n  blur: handleChange,\n  change: handleChange,\n  input: (e: unknown) => handleChange(e, !!errorMessage.value)\n}\n// COMPUTED\n// METHODS\n// WATCH\n// LIFECYCLE\nonMounted(() => autosize(elementRef.value))\nonBeforeUnmount(() => autosize.destroy(elementRef.value))\n</script>\n\n<template>\n  <div class=\"form-group my-2\">\n    <label class=\"form-label\" v-if=\"label\">{{ label }}</label>\n    <div class=\"form-control\">\n      <textarea class=\"form-textarea\" :class=\"{ 'has-error': !!errorMessage, success: meta.valid }\"\n        ref=\"elementRef\"\n        style=\"resize: none; clear: right;padding: 0.3em 0.5em;\"\n        :id=\"name\"\n        :name=\"name\"\n        :value=\"inputValue\"\n        :disabled=\"disabled\"\n        @change=\"$emit('update:event', $event)\"\n        @input=\"handleChange\"\n        @blur=\"handleBlur\"\n        v-on=\"validationListeners\"\n        v-bind=\"$attrs\"\n      ></textarea>\n      <ErrorMessage class=\"form-text text-muted\" v-if=\"props.type !== 'radio'\" :name=\"name\" />\n    </div>\n  </div>\n</template>\n"],"names":["name","toRef","props","inputValue","handleChange","errorMessage","handleBlur","meta","useField","elementRef","ref","validationListeners","e","onMounted","autosize","onBeforeUnmount"],"mappings":"qqBAuBMA,EAAcC,EAAMC,EAAO,MAAM,EACjC,CAAE,MAAOC,EAAY,aAAAC,EAAc,aAAAC,EAAc,WAAAC,EAAY,KAAAC,CAAA,EAASC,EAASR,EAAME,EAAM,MAAO,CACtG,KAAM,WACN,aAAcA,EAAM,MACpB,sBAAuB,EAAA,CACxB,EAEKO,EAAcC,IACCA,EAAIR,EAAM,OAAO,EACtC,MAAMS,EAAsB,CAC1B,KAAMP,EACN,OAAQA,EACR,MAAQQ,GAAeR,EAAaQ,EAAG,CAAC,CAACP,EAAa,KAAK,CAAA,EAM7D,OAAAQ,EAAU,IAAMC,EAASL,EAAW,KAAK,CAAC,EAC1CM,EAAgB,IAAMD,EAAS,QAAQL,EAAW,KAAK,CAAC"}