import{d as M,s as q,o as n,c as a,a as s,K as R,t as _,q as e,g as x,F as S,e as w,n as U,p as F,v as B,_ as E}from"./main.js";import{b as I}from"./rules.js";import"./autosize.esm.js";import{C as N}from"./CustomRadioField.js";import{C as V}from"./EvaluationForm.js";import{l as k}from"./lodash.js";import"./index2.js";import"./_commonjsHelpers.js";import"./sweetalert.min.js";const j={class:"question"},z={key:0,class:"text-red-500"},D={class:"description text-sm text-slate-900 leading-relaxed mx-4 mb-2"},Q={class:"mx-4"},O={class:"standardtable leftalignedtable"},T={class:"text-center leading-4"},$={class:"font-normal"},H={key:0,class:"text-sm font-thin"},K=M({__name:"SelfMixedLikertQuestion",props:{evaluation:{type:null,required:!0},question:{type:Object,required:!0},currentUser:{type:null,required:!0},initialState:{type:Object,required:!0}},emits:["update:initialState"],setup(L,{emit:P}){const v=L,t=q(v,"question"),o=q(v,"currentUser"),f=q(v,"initialState");function g(h,c){var l,u,d;if(((l=f.value)==null?void 0:l.data)||!k.exports.isEmpty((u=f.value)==null?void 0:u.data)){const i=k.exports.find((d=f.value)==null?void 0:d.data,{evaluatee:h});if(i!=null&&i.details){const r=k.exports.find(i.details,{question_number:c});return r==null?void 0:r.selected_lom}}return 0}return(h,c)=>{var l,u,d,i,r,y;return n(),a("div",{class:B(`question_${(l=e(t))==null?void 0:l.question_num} mx-4`)},[s("div",j,[R(_((u=e(t))==null?void 0:u.question_num)+". "+_((d=e(t))==null?void 0:d.title)+" ",1),(i=e(t))!=null&&i.required?(n(),a("span",z,"*")):x("v-if",!0)]),s("div",D,_((r=e(t))==null?void 0:r.instructions),1),s("div",Q,[s("table",O,[s("thead",null,[s("tr",null,[(n(!0),a(S,null,w((y=e(t))==null?void 0:y.loms,m=>{var p,b,C;return n(),a("th",{style:U("width: "+100/((b=(p=e(t))==null?void 0:p.loms)==null?void 0:b.length)+"%; text-align: center"),key:m.id},[s("div",T,[s("div",$,_(m.descriptor),1),parseInt((C=e(t))==null?void 0:C.show_marks)?(n(),a("div",H,"mark")):x("v-if",!0)])],4)}),128))])]),s("tbody",null,[s("tr",null,[F(e(V),{name:"data["+e(o).id+"][EvaluationMixeval]["+e(t).question_num+"][selected_lom]",value:g(e(o).id,e(t).question_num)},null,8,["name","value"]),(n(!0),a(S,null,w(e(t).loms,m=>(n(),a("td",{style:{"text-align":"center",height:"36px"},key:m.id},[F(e(N),{name:"data["+e(o).id+"][EvaluationMixeval]["+e(t).question_num+"][grade]",value:m.scale_level,rules:e(t).required?e(I):null,checked:g(e(o).id,e(t).question_num),onChange:c[0]||(c[0]=p=>h.$emit("update:initialState",{member_id:e(o).id,question_num:e(t).question_num,event:{key:"selected_lom",value:p.target.value}}))},null,8,["name","value","rules","checked"]),x(` TBD:: Check if the grade conversion (to percentages) will be handled on the server
            <CustomRadioField
              :value="gradeRoundUp(parseInt(question?.multiplier) / (question?.loms.length - parseInt(evaluation?.review?.zero_mark)) * parseInt(lom?.scale_level), 1)"
            />`)]))),128))])])])])],2)}}}),se=E(K,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/questions/SelfMixedLikertQuestion.vue"]]);export{se as default};
//# sourceMappingURL=SelfMixedLikertQuestion.js.map
