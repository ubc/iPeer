import{d as M,T as X,x as Y,o as m,c as f,a,t as g,B as Z,q as s,C as ee,g as P,v as te,_ as Q,s as G,j as U,U as se,F as A,e as F,p as q,D as ae,L as ie,r as z,k as $,m as H,w as ne,f as I}from"./main.js";import{l as x}from"./lodash.js";import{E as re}from"./EvaluationForm.js";import{U as J}from"./UserCard.js";import"./InputText.vue_vue_type_style_index_0_scoped_360a2797_lang.js";import{a as le}from"./rules.js";import{T as ue}from"./TextArea.js";import{I as C}from"./InputText.js";import"./_commonjsHelpers.js";import"./sweetalert.min.js";import"./Debugger.js";import"./array.js";const oe={class:"form-range form-range-inline flex flex-col"},de={class:"form-range-label text-slate-500"},pe=a("span",{class:"tick"},null,-1),me=["min","step","max","name","value","disabled"],ce={key:0,class:"flex justify-between items-center"},ve={key:0,class:"min text-sm text-slate-500 font-normal"},_e={key:1,class:"max text-sm text-slate-500 font-normal"},he=M({__name:"InputRange",props:{label:{type:String,required:!1},name:{type:String,required:!0},value:{type:String,required:!0},response:{type:Object,required:!0},points:{type:[String,Number],required:!0},rules:{type:String,required:!1},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},min:{type:[String,Number],required:!1,default:0},step:{type:[String,Number],required:!1,default:1},max:{type:[String,Number],required:!1,default:100},text:{type:Array,required:!1,default:()=>["min","max"]}},emits:["update:input"],setup(v,{emit:T}){const e=v,{name:o,value:i}=X(e),{value:b,errorMessage:_,handleBlur:n,handleChange:k,meta:t}=Y(o,e.rules,{initialValue:e.value,validateOnValueUpdate:!0}),d={blur:k,change:k,input:y=>k(y,!!_.value)};return(y,l)=>(m(),f("div",{class:te(["block block-slider",{"has-error":!!s(_),success:s(t).valid}])},[a("label",oe,[a("span",de,g(e.label),1),pe,a("input",Z({class:"form-range-input",type:"range",min:e.min,step:e.step,max:e.max,name:s(o),value:s(b),disabled:v.disabled},ee(d,!0),{onInput:l[0]||(l[0]=c=>y.$emit("update:input",c)),onBlur:l[1]||(l[1]=(...c)=>s(n)&&s(n)(...c))}),null,16,me)]),e.text?(m(),f("div",ce,[e.text[0]?(m(),f("div",ve,g(e.text[0]),1)):P("v-if",!0),e.text[1]?(m(),f("div",_e,g(e.text[1]),1)):P("v-if",!0)])):P("v-if",!0)],2))}}),fe=Q(he,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/fields/InputRange.vue"]]),be={class:"datatable"},ge={key:0,class:"question"},ye={key:1,class:"description text-sm mx-4 mb-2"},Se={class:"debugger _hidden"},xe={class:"text-xs text-red-500"},qe={class:"text-xs text-red-500"},ke={class:"text-xs text-red-500"},$e={class:"text-xs text-red-500"},we={class:"text-xs text-red-500"},Pe={class:"standardtable"},Re=a("thead",null,[a("tr",null,[a("th",null,[a("div",{class:""},"Peer")]),a("th",null,[a("div",{class:""},"Relative Contribution")])])],-1),Ce={style:{width:"20%"}},Ue={style:{width:"80%"}},Ve=["name","value"],Be={class:"debugger"},Ee=M({__name:"PeerSimpleRangeQuestion",props:{members:{type:Array,required:!0},initialState:{type:null,required:!0},remaining:{type:[String,Number],required:!0},name:{type:String,required:!0},label:{type:String,required:!1},question:{type:String,required:!1},description:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(v,{emit:T}){var y;const e=v,o=G(e,"initialState"),i=U((y=e.remaining)!=null?y:e.members.length*100),b=U([]),_=U(0),n=U([]),k=U(0);function t(){const l=x.exports.reduce(n.value,(r,p)=>r+=p,0),c=i.value-l,h=c>0?Math.min(...n.value):Math.max(...n.value),u=x.exports.findIndex(n.value,r=>r===h);n.value[u]+=c}function d(l){const{target:c,key:h,value:u}=l,r=b.value[h];_.value+=parseInt(u)-r,_.value<=0?n.value=x.exports.map(n.value,()=>i.value/n.value.length):(b.value[h]=parseInt(u),n.value=x.exports.map(b.value,p=>Math.round(i.value*p/_.value))),t(),k.value=x.exports.reduce(n.value,(p,S)=>p+=S,0),o.value.data.points=n.value}return se(()=>{var c,h,u;const l=(h=(c=o.value)==null?void 0:c.data)==null?void 0:h.points;if(l!=null&&l.length)n.value=[...l],b.value=x.exports.map(l,(r,p)=>{const R=parseInt(r)/i.value,w=100*R;return _.value+=w,w});else{const r=Math.round(i.value/e.members.length);b.value=x.exports.map(e.members,()=>r),_.value=r*((u=e.members)==null?void 0:u.length),n.value=x.exports.map(e.members,()=>i.value/e.members.length)}k.value=x.exports.reduce(n.value,(r,p)=>r+=parseInt(p),0)}),(l,c)=>(m(),f("div",be,[e.question?(m(),f("div",ge,g(e.question),1)):P("v-if",!0),e.description?(m(),f("div",ye,g(e.description),1)):P("v-if",!0),a("div",Se,[a("div",xe,"total_points: "+g(i.value),1),a("div",qe,"slider_sum: "+g(_.value),1),a("div",ke,"student_slider: "+g(b.value),1),a("div",$e,"student_scores: "+g(n.value),1),a("div",we,"theSumThingDelete: "+g(k.value),1)]),a("table",Pe,[Re,a("tbody",null,[(m(!0),f(A,null,F(e.members,(h,u)=>{var r,p,S,R,w,V,B,E,N,j,D,L,W,O;return m(),f("tr",{key:h.id},[a("td",Ce,[q(J,{member:h},null,8,["member"])]),a("td",Ue,[a("input",{type:"hidden",name:`${v.name}[${u}]`,value:((r=s(o))==null?void 0:r.data)&&((p=s(o))==null?void 0:p.data[v.name])?(S=s(o))==null?void 0:S.data[v.name][u]:""},null,8,Ve),q(s(fe),{text:["Less","More"],label:"A fair amount",name:`percent[${u}]`,value:b.value[u],response:(R=s(o))==null?void 0:R.data.points,points:((w=s(o))==null?void 0:w.data)&&((B=(V=s(o))==null?void 0:V.data)==null?void 0:B.points)?(N=(E=s(o))==null?void 0:E.data)==null?void 0:N.points[u]:"",placeholder:v.placeholder,disabled:e.disabled,"onUpdate:input":K=>d({target:v.name,key:u,value:K.target.value})},null,8,["name","value","response","points","placeholder","disabled","onUpdate:input"]),a("div",Be,g(((j=s(o))==null?void 0:j.data)&&((L=(D=s(o))==null?void 0:D.data)==null?void 0:L.points)?(O=(W=s(o))==null?void 0:W.data)==null?void 0:O.points[u]:""),1)])])}),128))])])]))}}),Ne=Q(Ee,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/questions/PeerSimpleRangeQuestion.vue"]]),je={class:"datatable",id:"PeerSimpleRangeQuestion"},De={key:0,class:"question"},Ie={key:1,class:"description text-sm mx-4 mb-2"},Me={class:"standardtable"},Qe=a("thead",null,[a("tr",null,[a("th",null,[a("div",{class:""},"Peer")]),a("th",null,[a("div",{class:""},"Comments")])])],-1),Te={style:{width:"20%"}},Ae={style:{width:"80%"}},Fe=M({__name:"PeerSimpleCommentQuestion",props:{members:{type:Array,required:!0},initialState:{type:null,required:!0},name:{type:String,required:!0},label:{type:String,required:!1},question:{type:String,required:!1},description:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(v,{emit:T}){const e=v;return(o,i)=>(m(),f("div",je,[e.question?(m(),f("div",De,g(e.question),1)):P("v-if",!0),e.description?(m(),f("div",Ie,g(e.description),1)):P("v-if",!0),a("table",Me,[Qe,a("tbody",null,[(m(!0),f(A,null,F(e.members,(b,_)=>(m(),f("tr",{key:b.id},[a("td",Te,[q(J,{member:b},null,8,["member"])]),a("td",Ae,[q(ue,{class:"flex-1",label:v.label,name:`${v.name}[${_}]`,rules:s(le),disabled:e.disabled},null,8,["label","name","rules","disabled"])])]))),128))])])]))}}),Le=Q(Fe,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/questions/PeerSimpleCommentQuestion.vue"]]),We=M({__name:"SimpleEvaluation",props:{currentUser:{type:null,required:!0},evaluation:{type:null,required:!0}},emits:["fetch:evaluation"],setup(v,{emit:T}){const e=v,o=ae();ie(),U();const i=G(e,"evaluation");let b=z({event_id:$(()=>{var t;return(t=i.value)==null?void 0:t.id}),group_id:$(()=>{var t,d;return(d=(t=i.value)==null?void 0:t.group)==null?void 0:d.id}),course_id:$(()=>{var t,d;return(d=(t=i.value)==null?void 0:t.course)==null?void 0:d.id}),group_event_id:$(()=>{var t;return(t=i.value)==null?void 0:t.group_event_id}),rubric_id:$(()=>{var t;return(t=i.value)==null?void 0:t.rubric_id}),user_id:$(()=>{var t;return(t=e.currentUser)==null?void 0:t.id}),evaluatee_count:$(()=>{var t,d;return(d=(t=i.value)==null?void 0:t.members)==null?void 0:d.length}),member_ids:$(()=>{var t;return x.exports.map((t=i.value)==null?void 0:t.members,d=>d.id)})});const _=$(()=>{var t,d,y,l,c,h,u;return((d=(t=i.value)==null?void 0:t.review)==null?void 0:d.response)&&!x.exports.isEmpty((l=(y=i.value)==null?void 0:y.review)==null?void 0:l.response)?s((h=(c=i.value)==null?void 0:c.review)==null?void 0:h.response):{submitter_id:(u=i.value)==null?void 0:u.id,submitted:null,date_submitted:"",data:{points:[],comments:[]}}}),n=z({points:{title:"1. Please rate each peer's relative contribution.",description:"Section description"},comments:{title:"2. Please provide overall comments about each peer.",description:"Section description"}}),k=$(()=>o.path==="submissions");return(t,d)=>(m(),H(re,{onSubmit:t.onSubmit,"initial-state":s(_),evaluation:e.evaluation},{default:ne(({onSave:y,errors:l,values:c,isSubmitting:h,evaluationRef:u})=>[I(t.$slots,"header",{},()=>{var r,p,S,R,w,V,B,E,N;return[q(s(C),{type:"hidden",name:"event_id",value:(r=e.evaluation)==null?void 0:r.id},null,8,["value"]),q(s(C),{type:"hidden",name:"group_id",value:(S=(p=e.evaluation)==null?void 0:p.group)==null?void 0:S.id},null,8,["value"]),q(s(C),{type:"hidden",name:"course_id",value:(w=(R=e.evaluation)==null?void 0:R.course)==null?void 0:w.id},null,8,["value"]),q(s(C),{type:"hidden",name:"data[Evaluation][evaluator_id]",value:(V=e.currentUser)==null?void 0:V.id},null,8,["value"]),q(s(C),{type:"hidden",name:"evaluateeCount",value:(E=(B=e.evaluation)==null?void 0:B.members)==null?void 0:E.length},null,8,["value"]),(m(!0),f(A,null,F((N=s(b))==null?void 0:N.member_ids,(j,D)=>(m(),H(s(C),{type:"hidden",name:"memberIDs[]",key:D,value:j},null,8,["value"]))),128))]}),I(t.$slots,"main",{},()=>{var r,p,S;return[P(""),q(Ne,{members:(r=s(i))==null?void 0:r.members,remaining:(p=s(i))==null?void 0:p.remaining,initialState:s(_),name:"points",question:n.points.title,description:n.points.description,disabled:s(k)},null,8,["members","remaining","initialState","question","description","disabled"]),q(Le,{members:(S=s(i))==null?void 0:S.members,initialState:s(_),name:"comments",disabled:s(k),question:n.comments.title,description:n.comments.description},null,8,["members","initialState","disabled","question","description"])]}),I(t.$slots,"footer"),I(t.$slots,"cta",{onSave:y,isSubmitting:h,values:c})]),_:3},8,["onSubmit","initial-state","evaluation"]))}}),at=Q(We,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/SimpleEvaluation.vue"]]);export{at as default};
//# sourceMappingURL=SimpleEvaluation.js.map
