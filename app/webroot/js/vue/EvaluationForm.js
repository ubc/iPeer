import{d as F,s as E,x as H,o as m,c as v,q as l,_ as P,j as S,a as c,t as p,M as B,N as J,g as _,O as L,Q as M,H as W,I as Q,u as x,B as z,f as A,R as G,p as b,F as K}from"./main.js";import{l as N}from"./lodash.js";import{s as D}from"./sweetalert.min.js";const X=["name","value","checked"],Y=F({__name:"CustomHiddenField",props:{name:{type:String,required:!0},value:{type:String,required:!0},modelValue:{type:[String,Number],required:!0}},setup(t){const n=t,o=E(n,"name"),{checked:w,handleChange:f}=H(o,void 0,{type:"hidden",checkedValue:n.value});return(k,O)=>(m(),v("input",{type:"hidden",name:l(o),value:n.value,checked:l(w)},null,8,X))}}),pe=P(Y,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/fields/CustomHiddenField.vue"]]),Z=t=>(L("data-v-c48ff1b4"),t=t(),M(),t),ee={class:"debugger"},te={class:"flex justify-between items-center"},ae={class:"text-teal-600 font-medium"},oe=Z(()=>c("hr",null,null,-1)),se={class:"flex justify-evenly space-x-4"},re={key:0,class:"debug code flex-1 break-normal break-words break-all overflow-x"},ne={key:1,class:"debug code flex-1 break-normal break-words break-all overflow-x"},ie={key:2,class:"debug code flex-1 break-normal break-words break-all overflow-x"},ue=F({__name:"Debugger",props:{title:{type:String,required:!0},state:{type:Object,required:!1},form:{type:Object,required:!1},data:{type:Object,required:!1}},setup(t){const n=S(!1);function o(){n.value=!n.value}return(w,f)=>(m(),v("div",ee,[c("div",te,[c("h3",ae,p(t.title),1),c("button",{onClick:o},p(n.value?"Hide":"Show"),1)]),oe,B(c("div",se,[t.state?(m(),v("pre",re,[c("code",null,p(JSON.stringify(t.state,null,2)),1)])):_("v-if",!0),t.form?(m(),v("pre",ne,[c("code",null,p(JSON.stringify(t.form,null,2)),1)])):_("v-if",!0),t.data?(m(),v("pre",ie,[c("code",null,p(JSON.stringify(t.data,null,2)),1)])):_("v-if",!0)],512),[[J,n.value]])]))}});const g=P(ue,[["__scopeId","data-v-c48ff1b4"],["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/Debugger.vue"]]),le={key:1},ce=F({__name:"EvaluationForm",props:{evaluation:{type:null,required:!0},initialState:{type:null,required:!0}},emits:["submit","save"],setup(t,{emit:n}){var C;const o=t,w=W(),{values:f,errors:k,meta:O,handleSubmit:$,isSubmitting:R}=Q({initialValues:(C=o.initialState)==null?void 0:C.data}),T=S(!0),y=S(!1),h=S();function j({errors:i}){var a;const s=Object.keys(i)[0],e=document.getElementById(s);(a=e==null?void 0:e.focus)==null||a.call(e),e==null||e.scrollIntoView({behavior:"smooth"})}$(()=>{n("submit",f)},j);const q=$(async()=>{var a,r,u;const i=new FormData(h.value);i.append("_method","POST");const s=new URLSearchParams;for(const d of i)s.append(d[0],d[1]);const e=await x(`/evaluations/makeEvaluation/${(a=o.evaluation)==null?void 0:a.id}/${(u=(r=o.evaluation)==null?void 0:r.group)==null?void 0:u.id}`,{method:"POST",timeout:300,body:s});await D({text:e.message,icon:e.statusText}),e.status===200&&await w.push({name:"dashboard"})},j);async function U(){var i,s,e;try{const a=new FormData(h.value);a.append("_method","PUT");const r=new URLSearchParams;for(const d of a)r.append(d[0],d[1]);const u=await x(`/evaluations/makeEvaluation/${(i=o.evaluation)==null?void 0:i.id}/${(e=(s=o.evaluation)==null?void 0:s.group)==null?void 0:e.id}`,{method:"POST",timeout:300,body:r});await D({text:u.message,icon:u.statusText})}catch{await D({text:"something went wrong...",icon:"error"})}}return z(()=>N.exports.cloneDeep(o.initialState),N.exports.debounce(async(i,s)=>{var e,a,r;try{const u=new FormData(h.value);u.append("_method","PUT");const d=new URLSearchParams;for(const I of u)d.append(I[0],I[1]);const V=await x(`/evaluations/makeEvaluation/${(e=o.evaluation)==null?void 0:e.id}/${(r=(a=o.evaluation)==null?void 0:a.group)==null?void 0:r.id}`,{method:"POST",timeout:300,body:d});console.table(V.message,"auto-saved every 5000ms!")}catch(u){console.warn("auto-save error.",u.message)}},5e3),{deep:!0}),(i,s)=>{var e,a;return m(),v(K,null,[c("form",{novalidate:"",onSubmit:s[0]||(s[0]=G((...r)=>l(q)&&l(q)(...r),["prevent"])),id:"evaluation_form",class:"evaluation-form",ref_key:"evaluation_form",ref:h},[A(i.$slots,"default",{evaluationRef:h.value,onSave:U,isSubmitting:l(R),errors:l(k),values:l(f),formMeta:l(O)})],544),T.value?(m(),v("button",{key:0,class:"debugger button default",onClick:s[1]||(s[1]=r=>y.value=!y.value)},p(y.value?"Hide":"Show")+" Debugger",1)):_("v-if",!0),y.value?(m(),v("div",le,[b(g,{title:"Form Values/Errors",state:l(f),form:l(k)},null,8,["state","form"]),b(g,{title:"InitialState",state:o.initialState},null,8,["state"]),b(g,{title:"Evaluation",state:t.evaluation},null,8,["state"]),b(g,{title:"Review",state:(e=t.evaluation)==null?void 0:e.review},null,8,["state"]),b(g,{title:"Response",state:(a=t.evaluation)==null?void 0:a.response},null,8,["state"])])):_("v-if",!0)],64)}}}),fe=P(ce,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/EvaluationForm.vue"]]);export{pe as C,fe as E};
//# sourceMappingURL=EvaluationForm.js.map
