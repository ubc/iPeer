import{_ as j,o as m,c as I,b as L,d as D,i as _,T as x,U as b,C as $,L as C,k as s,f as V,Q as F,S as G,A as O,r as H,x as u,D as J,a2 as K,w as B,g as R,j as l,F as U,e as A}from"./main.js";import{_ as r,a as W}from"./EvaluationForm.vue_vue_type_script_setup_true_lang.js";import{_ as X}from"./SectionSubtitle.vue_vue_type_script_setup_true_lang.js";import"./evaluation.js";const Y={},Z={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},ee=L("g",{id:"line"},[L("path",{d:"m21.49 62.77c3.309 0 6-2.691 6-6s-2.691-6-6-6-6 2.691-6 6 2.691 6 6 6zm0-10c2.206 0 4 1.794 4 4 0 2.206-1.794 4-4 4-2.206 0-4-1.794-4-4 0-2.206 1.794-4 4-4z"}),L("path",{d:"m12.36 66.78c1.728 0 3.135-1.406 3.135-3.135s-1.406-3.135-3.135-3.135-3.135 1.406-3.135 3.135 1.406 3.135 3.135 3.135zm0-4.27c0.6255 0 1.135 0.5088 1.135 1.135 0 0.6259-0.5093 1.135-1.135 1.135s-1.135-0.5088-1.135-1.135c0-0.626 0.5092-1.135 1.135-1.135z"}),L("path",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",d:"m17.49 48.58c-1.042-1.779-1.544-3.895-1.31-6.103 0.0786-0.7397 0.2418-1.449 0.4687-2.126-4.569-1.322-7.676-5.758-7.156-10.65 0.5836-5.492 5.509-9.471 11-8.887 0.881 0.0936 1.717 0.3098 2.508 0.6113 1.407-7.636 8.471-13.02 16.32-12.19 6.706 0.7126 11.91 5.74 13.14 12.03 0.3856-0.0038 0.7741 0.0084 1.167 0.0501 5.492 0.5836 9.471 5.509 8.887 11-0.3338 3.141-2.091 5.782-4.558 7.363 0.0658 0.8881 0.066 1.792-0.0315 2.709-0.8755 8.238-8.263 14.21-16.5 13.33-3.578-0.3802-6.725-1.991-9.072-4.364-0.8269 0.6584-1.757 1.187-2.758 1.559"})],-1),te=[ee];function ae(k,w){return m(),I("svg",Z,te)}const ne=j(Y,[["render",ae]]),ie=D({__name:"MixedEvaluationPeerQuestions",props:{members:null,currentUser:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState","update:modelValue"],setup(k,{emit:w}){const i=k,v=_(()=>{var t;switch((t=i.question)==null?void 0:t.type){case"Likert":return x(()=>b(()=>import("./PeerMixedLikertQuestion.js"),["js/assets/PeerMixedLikertQuestion.js","js/assets/main.js","css/assets/main.css","js/assets/rules.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.js","js/assets/EvaluationForm.vue_vue_type_script_setup_true_lang.js","js/assets/evaluation.js","js/assets/CustomRadioField.vue_vue_type_script_setup_true_lang.js"]));case"Range":return x(()=>b(()=>import("./PeerMixedRangeQuestion.js"),["js/assets/PeerMixedRangeQuestion.js","js/assets/main.js","css/assets/main.css"]));case"Comment":return x(()=>b(()=>import("./PeerMixedCommentQuestion.js"),["js/assets/PeerMixedCommentQuestion.js","js/assets/main.js","css/assets/main.css"]));case"Sentence":return x(()=>b(()=>import("./PeerMixedSentenceQuestion.js"),["js/assets/PeerMixedSentenceQuestion.js","js/assets/main.js","css/assets/main.css","js/assets/rules.js","js/assets/CustomInputField.vue_vue_type_script_setup_true_lang.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.js"]));case"Paragraph":return x(()=>b(()=>import("./PeerMixedParagraphQuestion.js"),["js/assets/PeerMixedParagraphQuestion.js","js/assets/main.js","css/assets/main.css","js/assets/rules.js","js/assets/CustomTextField.vue_vue_type_script_setup_true_lang.js","js/assets/autosize.esm.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.js"]))}});return(t,a)=>i.question?(m(),$(C(s(v)),{key:0,question:i.question,evaluation:i.evaluation,members:i.members,"initial-state":i.initialState,"onUpdate:initialState":a[0]||(a[0]=d=>t.$emit("update:initialState",d))},null,40,["question","evaluation","members","initial-state"])):V("",!0)}}),ue=D({__name:"MixedEvaluationSelfQuestions",props:{currentUser:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState","update:modelValue"],setup(k,{emit:w}){const i=k,v=_(()=>{var t;switch((t=i.question)==null?void 0:t.type){case"Likert":return x(()=>b(()=>import("./SelfMixedLikertQuestion.js"),["js/assets/SelfMixedLikertQuestion.js","js/assets/rules.js","js/assets/main.js","css/assets/main.css","js/assets/autosize.esm.js","js/assets/CustomRadioField.vue_vue_type_script_setup_true_lang.js","js/assets/EvaluationForm.vue_vue_type_script_setup_true_lang.js","js/assets/evaluation.js"]));case"Sentence":return x(()=>b(()=>import("./SelfMixedSentenceQuestion.js"),["js/assets/SelfMixedSentenceQuestion.js","js/assets/rules.js","js/assets/main.js","css/assets/main.css","js/assets/autosize.esm.js","js/assets/CustomInputField.vue_vue_type_script_setup_true_lang.js"]));case"Paragraph":return x(()=>b(()=>import("./SelfMixedParagraphQuestion.js"),["js/assets/SelfMixedParagraphQuestion.js","js/assets/rules.js","js/assets/main.js","css/assets/main.css","js/assets/CustomTextField.vue_vue_type_script_setup_true_lang.js","js/assets/autosize.esm.js"]))}});return(t,a)=>i.question?(m(),$(C(s(v)),{key:0,question:i.question,evaluation:i.evaluation,"current-user":i.currentUser,"initial-state":i.initialState,"onUpdate:initialState":a[0]||(a[0]=d=>t.$emit("update:initialState",d))},null,40,["question","evaluation","current-user","initial-state"])):V("",!0)}}),le={class:"self-evaluation my-8 space-y-8"},de=D({__name:"MixedEvaluation",props:{members:null,currentUser:null,evaluation:null},setup(k,{emit:w}){const i=k;F(),G();const v=O(i,"members"),t=O(i,"evaluation"),a=H({event_id:_(()=>{var e;return(e=t.value)==null?void 0:e.id}),group_id:_(()=>{var e,n;return(n=(e=t.value)==null?void 0:e.group)==null?void 0:n.id}),course_id:_(()=>{var e,n;return(n=(e=t.value)==null?void 0:e.course)==null?void 0:n.id}),group_event_id:_(()=>{var e;return(e=t.value)==null?void 0:e.group_event_id}),template_id:_(()=>{var e;return(e=t.value)==null?void 0:e.template_id}),member_count:_(()=>{var e;return(e=v.value)==null?void 0:e.length}),user_id:_(()=>{var e;return(e=i.currentUser)==null?void 0:e.id}),evaluatee_count:_(()=>{var e;return(e=v.value)==null?void 0:e.length}),member_ids:_(()=>u.exports.map(v.value,e=>e.id))}),d=J({}),M=_(()=>{var e,n;return u.exports.filter((n=(e=t.value)==null?void 0:e.mixed)==null?void 0:n.data,{self_eval:!1})}),z=_(()=>{var e,n;return u.exports.filter((n=(e=t.value)==null?void 0:e.mixed)==null?void 0:n.data,{self_eval:!0})});function N(){var e;return{id:"",submitter_id:(e=t.value)==null?void 0:e.id,submitted:null,date_submitted:"",data:u.exports.map(v.value,n=>{var c,p,h;return{evaluator:(c=i.currentUser)==null?void 0:c.id,evaluatee:n.id,score:"",comment_release:"",grade_release:"",details:u.exports.map((h=(p=t.value)==null?void 0:p.mixed)==null?void 0:h.data,f=>({evaluation_mixeval_id:"",question_number:f==null?void 0:f.question_num,question_comment:null,selected_lom:null,grade:"",comment_release:"0",record_status:"A"}))}})}}function T(e){var c,p,h,f;const n=(c=t.value)==null?void 0:c.mixed;if(n){const g=u.exports.find(n==null?void 0:n.data,{question_num:e==null?void 0:e.question_num});if(g){const P=u.exports.isEmpty(d.value)?{}:(p=d.value)==null?void 0:p.data;if(P){const y=u.exports.find(P,{evaluatee:e.member_id}).details,E=u.exports.isEmpty(y)?{}:u.exports.find(y,{question_number:e.question_num});switch((h=e==null?void 0:e.event)==null?void 0:h.key){case"selected_lom":const S=Math.pow(10,1),o=Number(g==null?void 0:g.multiplier)/(((f=g==null?void 0:g.loms)==null?void 0:f.length)-Number(n==null?void 0:n.zero_mark))*Number(e.event.value);u.exports.merge(E,{selected_lom:e.event.value,grade:Math.floor(o*S)/S});break;case"question_comment":u.exports.merge(E,{question_comment:e.event.value});break}}}}}return K(()=>{var n,c,p;const e=N();((n=t.value)==null?void 0:n.response)&&!u.exports.isEmpty((c=t.value)==null?void 0:c.response)?d.value=u.exports.merge(e,s((p=t.value)==null?void 0:p.response)):d.value=e}),(e,n)=>(m(),$(W,{onSubmit:e.onSubmit,"initial-state":d.value,evaluation:s(t)},{default:B(({onSave:c,errors:p,values:h,isSubmitting:f,evaluationRef:g,formMeta:P,autosave:y})=>[R(e.$slots,"header",{},()=>{var E,S;return[l(r,{name:"data[data][submitter_id]",value:a.user_id},null,8,["value"]),l(r,{name:"data[data][event_id]",value:a.event_id},null,8,["value"]),l(r,{name:"data[data][template_id]",value:a.template_id},null,8,["value"]),l(r,{name:"data[data][grp_event_id]",value:a.group_event_id},null,8,["value"]),l(r,{name:"data[data][members]",value:a.member_count},null,8,["value"]),s(u.exports.findIndex)((S=(E=s(t))==null?void 0:E.mixed)==null?void 0:S.data,o=>o.type==="Likert")!==-1?(m(!0),I(U,{key:0},A(s(v),o=>(m(),I(U,{key:o.id},[l(r,{name:`data[${o.id}][Evaluation][evaluatee_id]`,value:o.id},null,8,["name","value"]),l(r,{name:`data[${o.id}][Evaluation][evaluator_id]`,value:a.user_id},null,8,["name","value"]),l(r,{name:`data[${o.id}][Evaluation][event_id]`,value:a.event_id},null,8,["name","value"]),l(r,{name:`data[${o.id}][Evaluation][group_event_id]`,value:a.group_event_id},null,8,["name","value"]),l(r,{name:`data[${o.id}][Evaluation][group_id]`,value:a.group_id},null,8,["name","value"])],64))),128)):V("",!0)]}),R(e.$slots,"main",{},()=>{var E,S,o;return[(m(!0),I(U,null,A(s(M),q=>(m(),$(ie,{key:q.id,members:s(v),question:q,evaluation:s(t),"initial-state":d.value,"current-user":i.currentUser,autosave:y,"onUpdate:initialState":T},null,8,["members","question","evaluation","initial-state","current-user","autosave"]))),128)),parseInt((E=s(t))==null?void 0:E.self_eval)&&parseInt((o=(S=s(t))==null?void 0:S.mixed)==null?void 0:o.self_eval)>0?(m(),$(X,{key:0,subtitle:"Evaluate yourself",icon:{src:s(ne),size:"3rem"}},{default:B(()=>[l(r,{name:`data[${a.user_id}][Self-Evaluation][evaluatee_id]`,value:a.user_id},null,8,["name","value"]),l(r,{name:`data[${a.user_id}][Self-Evaluation][evaluator_id]`,value:a.user_id},null,8,["name","value"]),l(r,{name:`data[${a.user_id}][Self-Evaluation][event_id]`,value:a.event_id},null,8,["name","value"]),l(r,{name:`data[${a.user_id}][Self-Evaluation][group_event_id]`,value:a.group_event_id},null,8,["name","value"]),l(r,{name:`data[${a.user_id}][Self-Evaluation][group_id]`,value:a.group_id},null,8,["name","value"]),L("div",le,[(m(!0),I(U,null,A(s(z),(q,Q)=>(m(),$(ue,{key:q.id,idx:Q,question:q,evaluation:s(t),"initial-state":d.value,"current-user":i.currentUser,autosave:y,"onUpdate:initialState":T},null,8,["idx","question","evaluation","initial-state","current-user","autosave"]))),128))])]),_:2},1032,["icon"])):V("",!0)]}),R(e.$slots,"footer"),R(e.$slots,"cta",{onSave:c,isSubmitting:f,values:h})]),_:3},8,["onSubmit","initial-state","evaluation"]))}});export{de as default};
//# sourceMappingURL=MixedEvaluation.js.map
