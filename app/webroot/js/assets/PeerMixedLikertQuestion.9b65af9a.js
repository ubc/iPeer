import{d as B,A as g,o,c as u,b as n,v as L,t as f,k as e,f as w,F as k,e as y,n as R,j as S,q as E,x as $}from"./main.386b2761.js";import{i as A}from"./rules.dc1b156b.js";import{_ as D}from"./UserCard.vue_vue_type_script_setup_true_lang.c748ae7e.js";import{_ as F}from"./EvaluationForm.vue_vue_type_script_setup_true_lang.2babf397.js";import{_ as P}from"./CustomRadioField.vue_vue_type_script_setup_true_lang.fe611a6d.js";import"./evaluation.22a24287.js";const j={class:"question"},G={key:0,class:"text-red-500"},Q={class:"description text-sm text-slate-900 leading-relaxed mx-4 mb-2"},T={class:"standardtable leftalignedtable"},U=n("th",{style:{width:"20%"}},[n("div",{class:"text-center leading-4"},[n("div",{class:"font-normal"},"Peer"),n("div",{class:"text-sm font-thin"})])],-1),H={class:"text-center leading-4"},J={class:"font-normal"},K={key:0,class:"text-sm font-thin"},et=B({__name:"PeerMixedLikertQuestion",props:{members:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState"],setup(m,{emit:O}){const c=m,N=g(c,"members"),s=g(c,"question"),q=g(c,"initialState");function V(_,x,d,t){const r=Math.pow(10,1),i=parseInt(_)/(x-parseInt(d))*parseInt(t),a=Math.floor(i*r)/r;return`(${a} mark${a>1?"s":""})`}function I(_,x){var d,t,r;if(((d=q.value)==null?void 0:d.data)||!$.exports.isEmpty((t=q.value)==null?void 0:t.data)){const i=$.exports.find((r=q.value)==null?void 0:r.data,{evaluatee:_});if(i!=null&&i.details){const a=$.exports.find(i.details,{question_number:x});return a?a==null?void 0:a.selected_lom:""}}return 0}return(_,x)=>{var d;return o(),u("div",{class:E(`datatable question_${e(s).question_num} mx-4`)},[n("div",j,[L(f(e(s).question_num)+". "+f(e(s).title)+" ",1),e(s).required?(o(),u("span",G,"*")):w("",!0)]),n("div",Q,f(e(s).instructions),1),n("table",T,[n("thead",null,[n("tr",null,[U,(o(!0),u(k,null,y((d=c.question)==null?void 0:d.loms,(t,r)=>{var i,a,v,l,p,h;return o(),u("th",{style:R("width: "+80/((i=c.question)==null?void 0:i.loms.length)+"%; text-align: center"),key:t.id},[n("div",H,[n("div",J,f(t.descriptor),1),parseInt((a=c.question)==null?void 0:a.show_marks)?(o(),u("div",K,f(V((v=e(s))==null?void 0:v.multiplier,(l=e(s))==null?void 0:l.loms.length,(h=(p=m.evaluation)==null?void 0:p.mixed)==null?void 0:h.zero_mark,t==null?void 0:t.scale_level)),1)):w("",!0)])],4)}),128))])]),n("tbody",null,[(o(!0),u(k,null,y(e(N),(t,r)=>{var i,a,v;return o(),u("tr",{key:t.id},[S(F,{name:"data["+(t==null?void 0:t.id)+"][EvaluationMixeval]["+((i=e(s))==null?void 0:i.question_num)+"][selected_lom]",value:I(t==null?void 0:t.id,(a=e(s))==null?void 0:a.question_num)},null,8,["name","value"]),n("td",null,[S(D,{member:t},null,8,["member"])]),(o(!0),u(k,null,y((v=e(s))==null?void 0:v.loms,l=>{var p,h,C;return o(),u("td",{style:{"text-align":"center"},key:l==null?void 0:l.id,class:E({"has-error":!!_.error})},[S(P,{name:"data["+(t==null?void 0:t.id)+"][EvaluationMixeval]["+((p=e(s))==null?void 0:p.question_num)+"][grade]",value:l==null?void 0:l.scale_level,rules:(h=e(s))!=null&&h.required?e(A):null,checked:I(t==null?void 0:t.id,(C=e(s))==null?void 0:C.question_num),onChange:z=>{var M;return _.$emit("update:initialState",{member_id:t==null?void 0:t.id,question_num:(M=e(s))==null?void 0:M.question_num,event:{key:"selected_lom",value:z.target.value}})}},null,8,["name","value","rules","checked","onChange"])],2)}),128))])}),128))])])],2)}}});export{et as default};
