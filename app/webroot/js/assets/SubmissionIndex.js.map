{"version":3,"file":"SubmissionIndex.js","sources":["../../../vueapp/src/pages/SubmissionIndex.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { ref, reactive, onMounted } from 'vue';\nimport { useRoute } from 'vue-router'\nimport api from '@/services/api'\nimport Loader from '@/components/Loader.vue'\nimport PageHeading from '@/components/PageHeading.vue'\nimport ViewHeading from '@/student/components/ViewHeading.vue'\nimport { IconTwoUsers } from '@/components/icons'\n\nimport type { IUser, IEvaluation } from '@/types/typings'\n\n// REFERENCES\nconst emit              = defineEmits<{}>()\nconst props             = defineProps<{\n  currentUser: IUser\n}>()\nconst route             = useRoute()\n// DATA\nconst event_id          = ref(route.params.event_id)\nconst group_id          = ref(route.params.group_id)\nconst status            = ref<string>('')\nconst message           = ref<object|null>(null)\nconst reviews           = reactive({'id': 'work in progress'})\nlet evaluation          = reactive<IEvaluation|any>({})\nconst members           = ref<IUser[]>([])\n// COMPUTED\n// METHODS\nasync function fetchEvaluation() {\n  status.value = 'PENDING'\n  try {\n    const response: Promise<unknown> = await api.get('/evaluations/makeEvaluation', `${event_id.value}/${group_id.value}`)\n    if(response.status === 200 && response.statusText === 'OK') {\n      await Object.assign(evaluation, response?.data?.data)\n    }\n  } catch (err) {\n    message.value = {text: err.message, status: err.statusCode, type: 'error'}\n  } finally {\n    status.value = 'READY'\n  }\n}\n// WATCH\n// LIFECYCLE\nonMounted(async () => {\n  await fetchEvaluation()\n})\n</script>\n\n<template>\n  <template v-if=\"status === 'PENDING'\">\n    <Loader />\n  </template>\n\n  <template v-else>\n    <PageHeading :title=\"evaluation?.title\">\n      <ViewHeading\n          :due-date=\"evaluation?.due_date\"\n          :penalties=\"evaluation?.penalty\"\n          :group-name=\"evaluation?.group?.name\"\n          :course-title=\"evaluation?.course?.title\"\n          :icon=\"{src: IconTwoUsers, size: '6rem'}\"\n      />\n    </PageHeading>\n\n    <Suspense>\n      <router-view\n          class=\"tab-pane fade show active\"\n          id=\"response\"\n          role=\"tabpanel\"\n          aria-labelledby=\"response-tab\"\n          :current-user=\"currentUser\"\n          :members=\"members\"\n          :evaluation=\"evaluation\"\n          :reviews=\"reviews\"\n          @fetch:evaluation=\"fetchEvaluation\">\n      </router-view>\n    </Suspense>\n  </template>\n</template>\n"],"names":["route","useRoute","event_id","ref","group_id","status","message","reviews","reactive","evaluation","members","fetchEvaluation","response","api","_a","err","onMounted"],"mappings":"4aAgBA,MAAMA,EAAoBC,IAEpBC,EAAoBC,EAAIH,EAAM,OAAO,QAAQ,EAC7CI,EAAoBD,EAAIH,EAAM,OAAO,QAAQ,EAC7CK,EAAoBF,EAAY,EAAE,EAClCG,EAAoBH,EAAiB,IAAI,EACzCI,EAAoBC,EAAS,CAAC,GAAM,kBAAmB,CAAA,EACzD,IAAAC,EAAsBD,EAA0B,CAAA,CAAE,EAChD,MAAAE,EAAoBP,EAAa,CAAA,CAAE,EAGzC,eAAeQ,GAAkB,OAC/BN,EAAO,MAAQ,UACX,GAAA,CACI,MAAAO,EAA6B,MAAMC,EAAI,IAAI,8BAA+B,GAAGX,EAAS,SAASE,EAAS,OAAO,EAClHQ,EAAS,SAAW,KAAOA,EAAS,aAAe,MACpD,MAAM,OAAO,OAAOH,GAAYK,EAAAF,GAAA,YAAAA,EAAU,OAAV,YAAAE,EAAgB,IAAI,QAE/CC,GACCT,EAAA,MAAQ,CAAC,KAAMS,EAAI,QAAS,OAAQA,EAAI,WAAY,KAAM,OAAO,CAAA,QACzE,CACAV,EAAO,MAAQ,OACjB,CACF,CAGA,OAAAW,EAAU,SAAY,CACpB,MAAML,EAAgB,CAAA,CACvB"}