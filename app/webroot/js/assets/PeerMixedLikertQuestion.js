import{d as L,A as k,o,c as u,b as n,v as R,t as h,k as e,f as E,F as y,e as g,n as m,j as S,q as N,x as $}from"./main.js";import{i as A}from"./rules.js";import{_ as D}from"./UserCard.vue_vue_type_script_setup_true_lang.js";import{_ as F}from"./EvaluationForm.vue_vue_type_script_setup_true_lang.js";import{_ as P}from"./CustomRadioField.vue_vue_type_script_setup_true_lang.js";import"./evaluation.js";const j={class:"question"},G={key:0,class:"text-red-500"},Q={class:"description"},T={class:"standardtable center no-v-line"},U=n("th",{style:{width:"20%"}},[n("div",{class:"flex flex-col"},[n("div",{class:""},"Peer"),n("small",{class:"small"})])],-1),H={class:"flex flex-col"},J={class:""},K={key:0,class:"small"},et=L({__name:"PeerMixedLikertQuestion",props:{members:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState"],setup(I,{emit:O}){const c=I,V=k(c,"members"),s=k(c,"question"),x=k(c,"initialState");function z(_,q,d,t){const r=Math.pow(10,1),i=parseInt(_)/(q-parseInt(d))*parseInt(t),a=Math.floor(i*r)/r;return`(${a} mark${a>1?"s":""})`}function C(_,q){var d,t,r;if(((d=x.value)==null?void 0:d.data)||!$.exports.isEmpty((t=x.value)==null?void 0:t.data)){const i=$.exports.find((r=x.value)==null?void 0:r.data,{evaluatee:_});if(i!=null&&i.details){const a=$.exports.find(i.details,{question_number:q});return a?a==null?void 0:a.selected_lom:""}}return 0}return(_,q)=>{var d;return o(),u("div",{class:N(`datatable question_${e(s).question_num}`)},[n("div",j,[R(h(e(s).question_num)+". "+h(e(s).title)+" ",1),e(s).required?(o(),u("span",G,"*")):E("",!0)]),n("div",Q,h(e(s).instructions),1),n("table",T,[n("thead",null,[n("tr",null,[U,(o(!0),u(y,null,g((d=c.question)==null?void 0:d.loms,(t,r)=>{var i,a,p,l,v,f;return o(),u("th",{style:m("width: "+80/((i=c.question)==null?void 0:i.loms.length)+"%; text-align: center"),key:t.id},[n("div",H,[n("div",J,h(t.descriptor),1),parseInt((a=c.question)==null?void 0:a.show_marks)?(o(),u("small",K,h(z((p=e(s))==null?void 0:p.multiplier,(l=e(s))==null?void 0:l.loms.length,(f=(v=I.evaluation)==null?void 0:v.mixed)==null?void 0:f.zero_mark,t==null?void 0:t.scale_level)),1)):E("",!0)])],4)}),128))])]),n("tbody",null,[(o(!0),u(y,null,g(e(V),(t,r)=>{var i,a,p;return o(),u("tr",{key:t.id},[S(F,{name:"data["+(t==null?void 0:t.id)+"][EvaluationMixeval]["+((i=e(s))==null?void 0:i.question_num)+"][selected_lom]",value:C(t==null?void 0:t.id,(a=e(s))==null?void 0:a.question_num)},null,8,["name","value"]),n("td",null,[S(D,{member:t},null,8,["member"])]),(o(!0),u(y,null,g((p=e(s))==null?void 0:p.loms,l=>{var v,f,M;return o(),u("td",{style:{"text-align":"center"},key:l==null?void 0:l.id,class:N({"has-error":!!_.error})},[S(P,{name:"data["+(t==null?void 0:t.id)+"][EvaluationMixeval]["+((v=e(s))==null?void 0:v.question_num)+"][grade]",value:l==null?void 0:l.scale_level,rules:(f=e(s))!=null&&f.required?e(A):null,checked:C(t==null?void 0:t.id,(M=e(s))==null?void 0:M.question_num),onChange:B=>{var w;return _.$emit("update:initialState",{member_id:t==null?void 0:t.id,question_num:(w=e(s))==null?void 0:w.question_num,event:{key:"selected_lom",value:B.target.value}})}},null,8,["name","value","rules","checked","onChange"])],2)}),128))])}),128))])])],2)}}});export{et as default};
//# sourceMappingURL=PeerMixedLikertQuestion.js.map
