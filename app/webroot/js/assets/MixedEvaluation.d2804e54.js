import{_ as W,o as d,c as y,a as w,d as M,k as s,h as E,i as b,p as q,K,u as o,f as P,L as X,O as Y,j as Q,y as j,r as Z,v as r,$ as ee,w as F,g as A,q as l,F as V,e as B}from"./main.50a5d5e8.js";import{_ as u,a as te}from"./EvaluationForm.vue_vue_type_script_setup_true_lang.0a422faf.js";import{L as S}from"./LoadingComponent.38c7754c.js";import{_ as $}from"./ErrorComponent.vue_vue_type_script_setup_true_lang.0990953d.js";import{_ as ae}from"./SectionSubtitle.vue_vue_type_script_setup_true_lang.63871eaf.js";const ne={},ie={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},oe=w("g",{id:"line"},[w("path",{d:"m21.49 62.77c3.309 0 6-2.691 6-6s-2.691-6-6-6-6 2.691-6 6 2.691 6 6 6zm0-10c2.206 0 4 1.794 4 4 0 2.206-1.794 4-4 4-2.206 0-4-1.794-4-4 0-2.206 1.794-4 4-4z"}),w("path",{d:"m12.36 66.78c1.728 0 3.135-1.406 3.135-3.135s-1.406-3.135-3.135-3.135-3.135 1.406-3.135 3.135 1.406 3.135 3.135 3.135zm0-4.27c0.6255 0 1.135 0.5088 1.135 1.135 0 0.6259-0.5093 1.135-1.135 1.135s-1.135-0.5088-1.135-1.135c0-0.626 0.5092-1.135 1.135-1.135z"}),w("path",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",d:"m17.49 48.58c-1.042-1.779-1.544-3.895-1.31-6.103 0.0786-0.7397 0.2418-1.449 0.4687-2.126-4.569-1.322-7.676-5.758-7.156-10.65 0.5836-5.492 5.509-9.471 11-8.887 0.881 0.0936 1.717 0.3098 2.508 0.6113 1.407-7.636 8.471-13.02 16.32-12.19 6.706 0.7126 11.91 5.74 13.14 12.03 0.3856-0.0038 0.7741 0.0084 1.167 0.0501 5.492 0.5836 9.471 5.509 8.887 11-0.3338 3.141-2.091 5.782-4.558 7.363 0.0658 0.8881 0.066 1.792-0.0315 2.709-0.8755 8.238-8.263 14.21-16.5 13.33-3.578-0.3802-6.725-1.991-9.072-4.364-0.8269 0.6584-1.757 1.187-2.758 1.559"})],-1),re=[oe];function le(C,D){return d(),y("svg",ie,re)}const ue=W(ne,[["render",le]]),se=M({__name:"MixedEvaluationPeerQuestions",props:{members:null,currentUser:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState","update:modelValue"],setup(C,{emit:D}){const i=C,I=s(()=>{var a;switch((a=i.question)==null?void 0:a.type){case"Likert":return E({loader:()=>b(()=>import("./PeerMixedLikertQuestion.30990999.js"),["js/assets/PeerMixedLikertQuestion.30990999.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/rules.da5a5057.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.aefe23fe.js","js/assets/EvaluationForm.vue_vue_type_script_setup_true_lang.0a422faf.js","js/assets/CustomRadioField.vue_vue_type_script_setup_true_lang.531a7b94.js"]),loadingComponent:S,errorComponent:$});case"Range":return E({loader:()=>b(()=>import("./PeerMixedRangeQuestion.0a43cf57.js"),["js/assets/PeerMixedRangeQuestion.0a43cf57.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css"]),loadingComponent:S,errorComponent:$});case"Comment":return E({loader:()=>b(()=>import("./PeerMixedCommentQuestion.972aaa11.js"),["js/assets/PeerMixedCommentQuestion.972aaa11.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css"]),loadingComponent:S,errorComponent:$});case"Sentence":return E({loader:()=>b(()=>import("./PeerMixedSentenceQuestion.10c6cdf9.js"),["js/assets/PeerMixedSentenceQuestion.10c6cdf9.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/rules.da5a5057.js","js/assets/CustomInputField.vue_vue_type_script_setup_true_lang.dfacdb51.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.aefe23fe.js"]),loadingComponent:S,errorComponent:$});case"Paragraph":return E({loader:()=>b(()=>import("./PeerMixedParagraphQuestion.8713dd17.js"),["js/assets/PeerMixedParagraphQuestion.8713dd17.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/rules.da5a5057.js","js/assets/CustomTextField.vue_vue_type_script_setup_true_lang.c7545f12.js","js/assets/autosize.esm.7505a07e.js","js/assets/UserCard.vue_vue_type_script_setup_true_lang.aefe23fe.js"]),loadingComponent:S,errorComponent:$})}});return(a,n)=>i.question?(d(),q(K(o(I)),{key:0,question:i.question,evaluation:i.evaluation,members:i.members,"initial-state":i.initialState,"onUpdate:initialState":n[0]||(n[0]=_=>a.$emit("update:initialState",_))},null,40,["question","evaluation","members","initial-state"])):P("",!0)}}),me=M({__name:"MixedEvaluationSelfQuestions",props:{currentUser:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState","update:modelValue"],setup(C,{emit:D}){const i=C,I=s(()=>{var a;switch((a=i.question)==null?void 0:a.type){case"Likert":return E({loader:()=>b(()=>import("./SelfMixedLikertQuestion.992cd6d1.js"),["js/assets/SelfMixedLikertQuestion.992cd6d1.js","js/assets/rules.da5a5057.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/autosize.esm.7505a07e.js","js/assets/CustomRadioField.vue_vue_type_script_setup_true_lang.531a7b94.js","js/assets/EvaluationForm.vue_vue_type_script_setup_true_lang.0a422faf.js"]),loadingComponent:S,errorComponent:$});case"Sentence":return E({loader:()=>b(()=>import("./SelfMixedSentenceQuestion.57c6daa0.js"),["js/assets/SelfMixedSentenceQuestion.57c6daa0.js","js/assets/rules.da5a5057.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/autosize.esm.7505a07e.js","js/assets/CustomInputField.vue_vue_type_script_setup_true_lang.dfacdb51.js"]),loadingComponent:S,errorComponent:$});case"Paragraph":return E({loader:()=>b(()=>import("./SelfMixedParagraphQuestion.4a8cabc8.js"),["js/assets/SelfMixedParagraphQuestion.4a8cabc8.js","js/assets/rules.da5a5057.js","js/assets/main.50a5d5e8.js","css/assets/main.3a0a2aba.css","js/assets/CustomTextField.vue_vue_type_script_setup_true_lang.c7545f12.js","js/assets/autosize.esm.7505a07e.js"]),loadingComponent:S,errorComponent:$})}});return(a,n)=>i.question?(d(),q(K(o(I)),{key:0,question:i.question,evaluation:i.evaluation,"current-user":i.currentUser,"initial-state":i.initialState,"onUpdate:initialState":n[0]||(n[0]=_=>a.$emit("update:initialState",_))},null,40,["question","evaluation","current-user","initial-state"])):P("",!0)}}),de={class:"self-evaluation my-8 space-y-8"},ge=M({__name:"MixedEvaluation",props:{members:null,currentUser:null,evaluation:null},emits:["fetch:evaluation"],setup(C,{emit:D}){const i=C;X(),Y(),Q(null);const I=j(i,"members"),a=j(i,"evaluation"),n=Z({event_id:s(()=>{var e;return(e=a.value)==null?void 0:e.id}),group_id:s(()=>{var e,t;return(t=(e=a.value)==null?void 0:e.group)==null?void 0:t.id}),course_id:s(()=>{var e,t;return(t=(e=a.value)==null?void 0:e.course)==null?void 0:t.id}),group_event_id:s(()=>{var e;return(e=a.value)==null?void 0:e.group_event_id}),template_id:s(()=>{var e;return(e=a.value)==null?void 0:e.template_id}),member_count:s(()=>{var e,t;return(t=(e=a.value)==null?void 0:e.members)==null?void 0:t.length}),user_id:s(()=>{var e;return(e=i.currentUser)==null?void 0:e.id}),evaluatee_count:s(()=>{var e,t;return(t=(e=a.value)==null?void 0:e.members)==null?void 0:t.length}),member_ids:s(()=>{var e;return r.exports.map((e=a.value)==null?void 0:e.members,t=>t.id)})}),_=Q({}),G=s(()=>{var e,t;return r.exports.filter((t=(e=a.value)==null?void 0:e.mixed)==null?void 0:t.data,{self_eval:!1})}),H=s(()=>{var e,t;return r.exports.filter((t=(e=a.value)==null?void 0:e.mixed)==null?void 0:t.data,{self_eval:!0})});function J(){var e,t;return{id:"",submitter_id:(e=a.value)==null?void 0:e.id,submitted:null,date_submitted:"",data:r.exports.map((t=i.evaluation)==null?void 0:t.members,v=>{var p,x,h;return{evaluator:(p=i.currentUser)==null?void 0:p.id,evaluatee:v.id,score:"",comment_release:"",grade_release:"",details:r.exports.map((h=(x=a.value)==null?void 0:x.mixed)==null?void 0:h.data,m=>({evaluation_mixeval_id:"",question_number:m==null?void 0:m.question_num,question_comment:null,selected_lom:null,grade:"",comment_release:"0",record_status:"A"}))}})}}function z(e){var v,p,x,h;const t=(v=a.value)==null?void 0:v.mixed;if(t){const m=r.exports.find(t==null?void 0:t.data,{question_num:e==null?void 0:e.question_num});if(m){const O=r.exports.isEmpty(_.value)?{}:(p=_.value)==null?void 0:p.data;if(O){const T=r.exports.find(O,{evaluatee:e.member_id}).details,L=r.exports.isEmpty(T)?{}:r.exports.find(T,{question_number:e.question_num});switch((x=e==null?void 0:e.event)==null?void 0:x.key){case"selected_lom":const f=Math.pow(10,1),k=Number(m==null?void 0:m.multiplier)/(((h=m==null?void 0:m.loms)==null?void 0:h.length)-Number(t==null?void 0:t.zero_mark))*Number(e.event.value);r.exports.merge(L,{selected_lom:e.event.value,grade:Math.floor(k*f)/f});break;case"question_comment":r.exports.merge(L,{question_comment:e.event.value});break}}}}}return ee(()=>{var t,v,p;const e=J();((t=a.value)==null?void 0:t.response)&&!r.exports.isEmpty((v=a.value)==null?void 0:v.response)?_.value=r.exports.merge(e,o((p=a.value)==null?void 0:p.response)):_.value=e}),(e,t)=>(d(),q(te,{onSubmit:e.onSubmit,"initial-state":_.value,evaluation:i.evaluation,"onSet:message":t[0]||(t[0]=v=>e.$emit("set:message",e.message))},{default:F(({onSave:v,errors:p,values:x,isSubmitting:h,evaluationRef:m,formMeta:O,message:T,autosave:L})=>[A(e.$slots,"header",{},()=>{var f,k,R,g,U,N;return[l(u,{name:"data[data][submitter_id]",value:n.user_id},null,8,["value"]),l(u,{name:"data[data][event_id]",value:n.event_id},null,8,["value"]),l(u,{name:"data[data][template_id]",value:n.template_id},null,8,["value"]),l(u,{name:"data[data][grp_event_id]",value:n.group_event_id},null,8,["value"]),l(u,{name:"data[data][members]",value:n.member_count},null,8,["value"]),o(r.exports.findIndex)((k=(f=o(a))==null?void 0:f.mixed)==null?void 0:k.data,c=>c.type==="Likert")!==-1?(d(!0),y(V,{key:0},B((R=o(a))==null?void 0:R.members,c=>(d(),y(V,{key:c.id},[l(u,{name:`data[${c.id}][Evaluation][evaluatee_id]`,value:c.id},null,8,["name","value"]),l(u,{name:`data[${c.id}][Evaluation][evaluator_id]`,value:n.user_id},null,8,["name","value"]),l(u,{name:`data[${c.id}][Evaluation][event_id]`,value:n.event_id},null,8,["name","value"]),l(u,{name:`data[${c.id}][Evaluation][group_event_id]`,value:n.group_event_id},null,8,["name","value"]),l(u,{name:`data[${c.id}][Evaluation][group_id]`,value:n.group_id},null,8,["name","value"])],64))),128)):P("",!0),parseInt((g=o(a))==null?void 0:g.self_eval)&&parseInt((N=(U=o(a))==null?void 0:U.mixed)==null?void 0:N.self_eval)>0?(d(),y(V,{key:1},[l(u,{name:`data[${n.user_id}][Self-Evaluation][evaluatee_id]`,value:n.user_id},null,8,["name","value"]),l(u,{name:`data[${n.user_id}][Self-Evaluation][evaluator_id]`,value:n.user_id},null,8,["name","value"]),l(u,{name:`data[${n.user_id}][Self-Evaluation][event_id]`,value:n.event_id},null,8,["name","value"]),l(u,{name:`data[${n.user_id}][Self-Evaluation][group_event_id]`,value:n.group_event_id},null,8,["name","value"]),l(u,{name:`data[${n.user_id}][Self-Evaluation][group_id]`,value:n.group_id},null,8,["name","value"])],64)):P("",!0)]}),A(e.$slots,"main",{},()=>{var f,k,R;return[(d(!0),y(V,null,B(o(G),g=>(d(),q(se,{key:g.id,members:o(I),question:g,evaluation:o(a),"initial-state":_.value,"current-user":i.currentUser,autosave:L,"onUpdate:initialState":z},null,8,["members","question","evaluation","initial-state","current-user","autosave"]))),128)),parseInt((f=o(a))==null?void 0:f.self_eval)&&parseInt((R=(k=o(a))==null?void 0:k.mixed)==null?void 0:R.self_eval)>0?(d(),q(ae,{key:0,subtitle:"Evaluate yourself",icon:{src:o(ue),size:"3rem"}},{default:F(()=>[w("div",de,[(d(!0),y(V,null,B(o(H),(g,U)=>(d(),q(me,{key:g.id,idx:U,question:g,evaluation:o(a),"initial-state":_.value,"current-user":i.currentUser,autosave:L,"onUpdate:initialState":z},null,8,["idx","question","evaluation","initial-state","current-user","autosave"]))),128))])]),_:2},1032,["icon"])):P("",!0)]}),A(e.$slots,"footer"),A(e.$slots,"cta",{onSave:v,isSubmitting:h,values:x})]),_:3},8,["onSubmit","initial-state","evaluation"]))}});export{ge as default};
