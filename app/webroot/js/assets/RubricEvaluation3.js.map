{"version":3,"file":"RubricEvaluation3.js","sources":["../../../vueapp/src/student/views/submission/reviews/RubricEvaluation.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { computed, ref, toRefs } from 'vue'\nimport { isEmpty, map, find, reduce } from 'lodash'\nimport UserCard from '@/student/components/UserCard.vue'\nimport type {IUser, IReview, IReviewEvaluation} from '@/types/typings'\ninterface Props {\n  self: string\n  currentUser: IUser\n  members: IUser[]\n  reviews: IReview\n  isDisabled?: boolean\n}\n// REFERENCES\nconst emit          = defineEmits<{}>()\nconst props         = defineProps<Props>()\n// DATA\nconst name          = ref('View Rubric Evaluation Result')\n// const reviews       = toRefs(props, 'reviews')\n// COMPUTED\nconst evaluator = computed(() => props.reviews?.evaluator) as unknown as IReviewEvaluation\nconst evaluatee = computed(() => props.reviews?.evaluatee) as unknown as IReviewEvaluation\n// METHODS\n// WATCH\n// LIFECYCLE\nfunction calcAverageGrade(criteria_num: string) {\n  const data = map(evaluatee.value, review => find(review?.details, {criteria_number: criteria_num}))\n  return reduce(map(data, d => d['grade']), (acc, val) => acc + Number(val) / data?.length, 0)\n}\n</script>\n\n<template>\n  <div class=\"evaluation-reviews\" v-if=\"!isEmpty(props.reviews) && props.reviews?.event?.is_released\">\n\n    <div class=\"datatable\" v-for=\"criteria of props.reviews?.rubric?.criterias\" :key=\"criteria.id\">\n      <div class=\"question\">{{ criteria.criteria_num }}. {{ criteria.criteria }}\n        <span class=\"text-base text-slate-500\" v-if=\"!isEmpty(evaluatee) && criteria.multiplier > 0\">\n          â€” <span class=\"badge\">{{ calcAverageGrade(criteria.criteria_num) }}</span> / {{ criteria.multiplier }} marks\n        </span>\n      </div>\n      <table class=\"standardtable center no-v-line bg-gray-100\">\n        <thead>\n        <tr>\n          <th style=\"width: 20%\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">Peer</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n          <th :style=\"{width: (80 / props.reviews?.rubric?.loms?.length)+'%'}\" v-for=\"lom of props.reviews?.rubric?.loms\" :key=\"lom.id\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">{{ lom.lom_comment }}</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td><UserCard :member=\"{first_name: 'Peers', last_name: 'said'}\" class=\"font-medium\" /></td>\n          <td :style=\"{width: (80 / props.reviews?.rubric?.loms?.length)+'%'}\" v-for=\"lom of props.reviews?.rubric?.loms\" :key=\"lom.id\">\n            <ul class=\"likert review\" v-if=\"!isEmpty(evaluatee)\">\n              <li class=\"input\" v-for=\"(r,i) of map(evaluatee, r => find(r.details, {criteria_number: criteria?.criteria_num}))\" :key=\"i\">\n                {{ r?.selected_lom === lom?.lom_num ? 'x' : '' }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n        <tr v-if=\"parseInt(props.reviews?.event?.self_eval)\">\n          <td><UserCard :member=\"{first_name: 'You', last_name: 'said'}\" class=\"font-medium\" /></td>\n          <td :style=\"{width: (80 / props?.reviews?.rubric.loms.length)+'%'}\" v-for=\"lom of props?.reviews?.rubric.loms\" :key=\"lom.id\">\n            <ul class=\"likert review\" v-if=\"!isEmpty(evaluator)\">\n              <li class=\"input\" v-for=\"(r,i) of map(evaluator, r => find(r.details, {criteria_number: criteria?.criteria_num}))\" :key=\"i\">\n                {{ r?.selected_lom === lom?.lom_num ? 'x' : '' }}\n              </li>\n            </ul>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n\n      <table class=\"standardtable center no-v-line bg-gray-100\">\n        <thead>\n        <tr>\n          <th style=\"width: 20%\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">Peer</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n          <th style=\"width: 80%\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">Comments About Your Teamwork</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td><UserCard :member=\"{first_name: 'Peers', last_name: 'said'}\" class=\"font-medium\" /></td>\n          <td style=\"text-align: left\">\n            <ul class=\"sentence review\">\n              <li class=\"text quote\" v-for=\"(r,i) of evaluatee\" :key=\"i\">\n                <template v-for=\"(detail, d) of r.details\" :key=\"d\">\n                  {{ detail.criteria_number === criteria.criteria_num ? detail.criteria_comment : '' }}\n                </template>\n              </li>\n            </ul>\n          </td>\n        </tr>\n        <tr v-if=\"parseInt(props.reviews?.event?.self_eval)\">\n          <td><UserCard :member=\"{first_name: 'You', last_name: 'said'}\" class=\"font-medium\" /></td>\n          <td style=\"text-align: left\">\n            <ul class=\"sentence review\">\n              <li class=\"text quote\" v-for=\"(r,i) of evaluator\" :key=\"i\">\n                <template v-for=\"(detail, d) of r.details\" :key=\"d\">\n                  {{ detail.criteria_number === criteria.criteria_num ? detail.criteria_comment : '' }}\n                </template>\n              </li>\n            </ul>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class=\"datatable\">\n      <div class=\"question\">\n        {{props.reviews?.rubric?.criterias?.length+1}}. {{ 'Please provide overall comments about each peer.' }}\n      </div>\n      <table class=\"standardtable center no-v-line\">\n        <thead>\n        <tr>\n          <th style=\"width: 20%\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">Peer</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n          <th style=\"width: 80%\">\n            <div class=\"text-base font-medium leading-4 tracking-wide\">\n              <div class=\"\">Comments About Your Teamwork</div>\n              <div class=\"\"></div>\n            </div>\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td><UserCard :member=\"{first_name: 'Peers', last_name: 'Said'}\" class=\"font-medium\" /></td>\n          <td style=\"text-align: left\">\n            <ul class=\"paragraph review\">\n              <li class=\"text quote\" v-for=\"(r,i) of evaluatee\" :key=\"r?.id+i\">{{ r?.comment }}</li>\n            </ul>\n          </td>\n        </tr>\n        <tr v-if=\"parseInt(props.reviews?.event?.self_eval)\">\n          <td><UserCard :member=\"{first_name: 'You', last_name: 'Said'}\" class=\"font-medium\" /></td>\n          <td style=\"text-align: left\">\n            <ul class=\"paragraph review\">\n              <li class=\"text quote\" v-for=\"(r,i) of evaluator\" :key=\"r?.id+i\">{{ r?.comment }}</li>\n            </ul>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n\n  </div>\n</template>\n"],"names":["ref","evaluator","computed","_a","props","evaluatee","calcAverageGrade","criteria_num","data","map","review","find","reduce","d","acc","val"],"mappings":"i8DAgBsBA,EAAI,+BAA+B,EAGzD,MAAMC,EAAYC,EAAS,IAAA,OAAM,OAAAC,EAAAC,EAAM,UAAN,YAAAD,EAAe,UAAS,EACnDE,EAAYH,EAAS,IAAA,OAAM,OAAAC,EAAAC,EAAM,UAAN,YAAAD,EAAe,UAAS,EAIzD,SAASG,EAAiBC,EAAsB,CAC9C,MAAMC,EAAOC,EAAA,QAAA,IAAIJ,EAAU,MAAiBK,GAAAC,eAAKD,GAAA,YAAAA,EAAQ,QAAS,CAAC,gBAAiBH,CAAY,CAAC,CAAC,EAClG,OAAOK,EAAAA,QAAAA,OAAOH,EAAAA,QAAAA,IAAID,EAAWK,GAAAA,EAAE,KAAQ,EAAG,CAACC,EAAKC,IAAQD,EAAM,OAAOC,CAAG,GAAIP,GAAA,YAAAA,EAAM,QAAQ,CAAC,CAC7F"}