import{d as z,y as p,o as l,c as o,a as s,R as E,t as m,u as t,f as I,F as h,e as f,n as N,q as x,z as C,v as q}from"./main.50a5d5e8.js";import{g as R}from"./rules.da5a5057.js";import{_ as V}from"./UserCard.vue_vue_type_script_setup_true_lang.aefe23fe.js";import{_ as B}from"./EvaluationForm.vue_vue_type_script_setup_true_lang.0a422faf.js";import{_ as L}from"./CustomRadioField.vue_vue_type_script_setup_true_lang.531a7b94.js";const D={class:"question"},F={key:0,class:"text-red-500"},P={class:"description text-sm text-slate-900 leading-relaxed mx-4 mb-2"},A={class:"standardtable leftalignedtable"},G=s("th",{style:{width:"20%"}},[s("div",{class:"text-center leading-4"},[s("div",{class:"font-normal"},"Peer"),s("div",{class:"text-sm font-thin"})])],-1),Q={class:"text-center leading-4"},T={class:"font-normal"},U={key:0,class:"text-sm font-thin"},X=z({__name:"PeerMixedLikertQuestion",props:{members:null,evaluation:null,question:null,initialState:null,autosave:null},emits:["update:initialState"],setup(g,{emit:j}){const d=g,M=p(d,"members"),a=p(d,"question"),v=p(d,"initialState");function w(c,_,r,e){const u=Math.pow(10,1),n=parseInt(c)/(_-parseInt(r))*parseInt(e),i=Math.floor(n*u)/u;return`(${i} mark${i>1?"s":""})`}function k(c,_){var r,e,u;if(((r=v.value)==null?void 0:r.data)||!q.exports.isEmpty((e=v.value)==null?void 0:e.data)){const n=q.exports.find((u=v.value)==null?void 0:u.data,{evaluatee:c});if(n!=null&&n.details){const i=q.exports.find(n.details,{question_number:_});return i?i==null?void 0:i.selected_lom:""}}return 0}return(c,_)=>{var r;return l(),o("div",{class:C(`datatable question_${t(a).question_num} mx-4`)},[s("div",D,[E(m(t(a).question_num)+". "+m(t(a).title)+" ",1),t(a).required?(l(),o("span",F,"*")):I("",!0)]),s("div",P,m(t(a).instructions),1),s("table",A,[s("thead",null,[s("tr",null,[G,(l(!0),o(h,null,f((r=d.question)==null?void 0:r.loms,(e,u)=>{var n,i,y,b,S,$;return l(),o("th",{style:N("width: "+80/((n=d.question)==null?void 0:n.loms.length)+"%; text-align: center"),key:e.id},[s("div",Q,[s("div",T,m(e.descriptor),1),parseInt((i=d.question)==null?void 0:i.show_marks)?(l(),o("div",U,m(w((y=t(a))==null?void 0:y.multiplier,(b=t(a))==null?void 0:b.loms.length,($=(S=g.evaluation)==null?void 0:S.mixed)==null?void 0:$.zero_mark,e==null?void 0:e.scale_level)),1)):I("",!0)])],4)}),128))])]),s("tbody",null,[(l(!0),o(h,null,f(t(M),(e,u)=>(l(),o("tr",{key:e.id},[x(B,{name:"data["+e.id+"][EvaluationMixeval]["+t(a).question_num+"][selected_lom]",value:k(e.id,t(a).question_num)},null,8,["name","value"]),s("td",null,[x(V,{member:e},null,8,["member"])]),(l(!0),o(h,null,f(t(a).loms,n=>(l(),o("td",{style:{"text-align":"center"},key:n.id,class:C({"has-error":!!c.error})},[x(L,{name:"data["+e.id+"][EvaluationMixeval]["+t(a).question_num+"][grade]",value:n.scale_level,rules:t(a).required?t(R):null,checked:k(e.id,t(a).question_num),onChange:i=>c.$emit("update:initialState",{member_id:e.id,question_num:t(a).question_num,event:{key:"selected_lom",value:i.target.value}})},null,8,["name","value","rules","checked","onChange"])],2))),128))]))),128))])])],2)}}});export{X as default};
