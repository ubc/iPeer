import{_ as j,o as a,c as u,b as F,d as U,p as f,q as s,a as e,t as c,g as b,s as T,H as L,v as V,B as O,C as A,j as B,N as G,F as E,e as R,K as D,l as J,O as X,m as H,w as I,z as Y,r as Q,k as q,I as Z,f as ee}from"./main.js";import{l as $}from"./lodash.js";import{I as C,E as te}from"./InputElement.js";import{d as z}from"./autosize.esm.js";import{S as se}from"./SectionSubtitle.js";import"./_commonjsHelpers.js";import"./Debugger.js";import"./sweetalert.min.js";const ne={},oe={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},re=F('<g id="line"><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M11,16.9092l4.9985-5h43.003c0.5514,0,0.9985,0.447,0.9985,0.9985v43.003c0,0.5514-0.447,0.9985-0.9985,0.9985"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M55.0015,60.9092h-43.003c-0.5514,0-0.9985-0.447-0.9985-0.9985v-43.003c0-0.5514,0.447-0.9985,0.9985-0.9985h43.003 c0.5514,0,0.9985,0.447,0.9985,0.9985v43.003C56,60.4621,55.553,60.9092,55.0015,60.9092z"></path><polyline fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" points="47.3583,29.7985 43.3583,29.7985 43.3583,36.7985 47.3583,36.7985"></polyline><line x1="43.3583" x2="46.3583" y1="33.2985" y2="33.2985" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line><polyline fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" points="19.6417,36.7985 19.6417,29.7985 24.6417,36.7985 24.6417,29.7985"></polyline><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M30.8583,36.7985L30.8583,36.7985c-1.3807,0-2.5-1.1193-2.5-2.5v-2c0-1.3807,1.1193-2.5,2.5-2.5l0,0c1.3807,0,2.5,1.1193,2.5,2.5 v2C33.3583,35.6792,32.239,36.7985,30.8583,36.7985z"></path><line x1="36.3583" x2="40.3583" y1="29.8286" y2="29.8286" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line><line x1="38.3583" x2="38.3583" y1="29.8286" y2="36.8286" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"></line></g>',1),le=[re];function ie(r,v){return a(),u("svg",oe,le)}const ae=j(ne,[["render",ie],["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/icons/IconNotebook.vue"]]),de={},ue={id:"emoji",viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},ce=F('<g id="line"><g><path fill="none" stroke="#000000" stroke-linejoin="round" stroke-width="2" d="M36,45c-5.9,0-11-6-11-14c0-3.3,1-7.4,3-10 c0.3-0.3,0.5-0.6,0.8-0.9c2-1.8,4.5-2.8,7.2-2.8l0,0c2.7,0,5.2,1,7.2,2.8c0.3,0.3,0.6,0.6,0.8,0.9c2,2.6,3,6.7,3,10 C47,39,41.9,45,36,45"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17,59.9v-3c0-5,5-9,10-9 c6,5,12,5,18,0c5,0,10,4,10,9v3"></path><path d="M42,29.9c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2S42,28.8,42,29.9"></path><path d="M34,29.9c0,1.1-0.9,2-2,2c-1.1,0-2-0.9-2-2s0.9-2,2-2C33.1,27.9,34,28.8,34,29.9"></path><path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M33,38.1c1.9,1,4.1,1,6,0"></path></g></g>',1),me=[ce];function pe(r,v){return a(),u("svg",ue,me)}const ve=j(de,[["render",pe],["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/icons/IconSmilingUser.vue"]]),he={class:"flex justify-center items-center md:space-x-4"},_e={key:0,class:"flex flex-col justify-center items-center text-sm leading-4"},fe=U({__name:"UserCard",props:{member:{type:Object,required:!0}},setup(r){const v=r;return(t,w)=>(a(),u("div",he,[f(s(ve),{class:"hidden md:block w-12 h-12"}),v.member?(a(),u("div",_e,[e("span",null,c(v.member.first_name),1),e("span",null,c(v.member.last_name),1)])):b("v-if",!0)]))}}),K=j(fe,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/components/UserCard.vue"]]),xe=["for"],be={class:"form-control flex flex-col"},ye=["name","id","type","value","placeholder","disabled"],ke=U({__name:"InputRangeElement",props:{type:{type:String,required:!1},value:{type:String,required:!1},name:{type:String,required:!1},label:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(r){const v=r,t=T(v,"name"),{value:w,errorMessage:l,handleBlur:n,handleChange:m,meta:i}=L(t,void 0,{initialValue:v.value});return(P,S)=>(a(),u("div",{class:V(["form-group",{"has-error":!!s(l),success:s(i).valid}])},[r.label?(a(),u("label",{key:0,class:"form-label",for:s(t)},c(r.label),9,xe)):b("v-if",!0),e("div",be,[e("input",{class:"form-input-range flex-1",name:s(t),min:0,max:100,id:s(t),type:r.type,value:s(w),placeholder:r.placeholder,onInput:S[0]||(S[0]=(...y)=>s(m)&&s(m)(...y)),onBlur:S[1]||(S[1]=(...y)=>s(n)&&s(n)(...y)),disabled:r.disabled},null,40,ye),e("span",{class:V(`hidden form--text text-xs ${s(i).dirty?"text-red-500":"text-green-500"} text-muted`)},c(s(i)),3),O(e("span",{class:"form-text text-muted"},c(s(l)),513),[[A,s(l)||s(i).valid]])])],2))}}),ge=j(ke,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/fields/experimental/InputRangeElement.vue"]]),we={class:"text-xs text-red-500"},Se={class:"text-xs text-red-500"},qe={class:"text-xs text-red-500"},$e={class:"text-xs text-red-500"},je={class:"text-xs text-red-500"},Pe={class:"datatable"},Ce={key:0,class:"question"},Ue={key:1,class:"description text-sm mx-4 mb-2"},Me={class:"standardtable"},Be=e("thead",null,[e("tr",null,[e("th",null,[e("div",{class:""},"Peer")]),e("th",null,[e("div",{class:""},"Relative Contribution")])])],-1),Ie={style:{width:"20%"}},Ve={style:{width:"80%"}},Ee={class:"slider-wrapper flex flex-col py-1 mx-2"},Te=e("div",{class:"amount text-sm text-slate-700 leading-3 mb-4"},[D("A fair"),e("br"),D("amount")],-1),Ne=e("div",{class:"tick text-slate-500"},null,-1),Re=["name","value"],We=e("div",{class:"controls flex justify-between items-center"},[e("div",{class:"text-sm text-slate-700 leading-3"},"Less"),e("div",{class:"text-sm text-slate-700 leading-3"},"More")],-1),De={class:"temp"},Qe={class:"text-xs text-red-700"},ze=U({__name:"PeerSimpleRangeQuestion",props:{members:{type:Array,required:!0},form:{type:Object,required:!0},name:{type:String,required:!0},label:{type:String,required:!1},question:{type:String,required:!1},description:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(r,{emit:v}){var o,d,k;const t=r,w=T(t,"form"),l=B((k=(d=(o=t.evaluation)==null?void 0:o.review)==null?void 0:d.remaining)!=null?k:t.members.length*100),n=B([]),m=B(0),i=B([]),P=B(0);function S(){const h=$.exports.reduce(i.value,(g,M)=>g+=M,0),x=l.value-h,_=x>0?Math.min(...i.value):Math.max(...i.value),p=$.exports.findIndex(i.value,g=>g===_);i.value[p]+=x,console.log({remainder:x})}function y(h){const{target:x,key:_,value:p}=h,g=n.value[_];m.value+=parseInt(p)-g,m.value<=0?i.value=$.exports.map(i.value,()=>l.value/i.value.length):(n.value[_]=parseInt(p),i.value=$.exports.map(n.value,M=>Math.round(l.value*M/m.value))),S(),P.value=$.exports.reduce(i.value,(M,N)=>M+=N,0),w.value.points=i.value}return G(()=>{var h,x,_;if((x=(h=t.form)==null?void 0:h.points)!=null&&x.length)i.value=[...t.form.points],n.value=$.exports.map(t.form.points,(p,g)=>{const N=parseInt(p)/l.value,W=100*N;return m.value+=W,W});else{const p=Math.round(l.value/t.members.length);n.value=$.exports.map(t.members,()=>p),m.value=p*((_=t.members)==null?void 0:_.length),i.value=$.exports.map(t.members,()=>l.value/t.members.length)}P.value=$.exports.reduce(i.value,(p,g)=>p+=parseInt(g),0)}),(h,x)=>(a(),u(E,null,[e("div",we,"total_points: "+c(l.value),1),e("div",Se,"slider_sum: "+c(m.value),1),e("div",qe,"student_slider: "+c(n.value),1),e("div",$e,"student_scores: "+c(i.value),1),e("div",je,"theSumThingDelete: "+c(P.value),1),e("div",Pe,[t.question?(a(),u("div",Ce,c(t.question),1)):b("v-if",!0),t.description?(a(),u("div",Ue,c(t.description),1)):b("v-if",!0),e("table",Me,[Be,e("tbody",null,[(a(!0),u(E,null,R(t.members,(_,p)=>(a(),u("tr",{key:_.id},[e("td",Ie,[f(K,{member:_},null,8,["member"])]),e("td",Ve,[e("div",Ee,[Te,Ne,e("input",{type:"hidden",name:`${r.name}[${p}]`,value:t.form[r.name][p]},null,8,Re),b('            <input type="text"  value="" />'),f(ge,{type:"range",label:r.label,value:n.value[p],name:`test[${p}]`,placeholder:r.placeholder,disabled:t.disabled,onInput:g=>y({target:r.name,key:p,value:g.target.value})},null,8,["label","value","name","placeholder","disabled","onInput"]),b('                :name="`${name}[${memberIdx}]`"'),b('                :name="student_slider[memberIdx]"'),We,e("div",De,[e("div",Qe,c(t.form[r.name][p]),1)])])])]))),128))])])])],64))}}),Fe=j(ze,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/questions/PeerSimpleRangeQuestion.vue"]]),Le=["for"],Oe=["innerHTML"],Ae=["name","id","value","disabled","placeholder"],He=U({__name:"TextElement",props:{label:{type:String,required:!0},value:{type:String,required:!1},name:{type:String,required:!0},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(r){const v=r,t=T(v,"name"),w=B(),{value:l,errorMessage:n,handleBlur:m,handleChange:i,meta:P}=L(t,void 0,{initialValue:v.value});return J(()=>z(w.value)),X(()=>z.destroy(w.value)),(S,y)=>(a(),u("div",{class:V(["flex flex-col",{"has-error":!!s(n),success:s(P).valid}])},[v.label?(a(),u("label",{key:0,for:s(t),class:"text-sm text-left"},c(v.label),9,Le)):b("v-if",!0),r.disabled?(a(),u("div",{key:1,class:"quote text-sm text-left",innerHTML:s(l)},null,8,Oe)):(a(),u("textarea",{key:2,ref_key:"element",ref:w,class:V(["block appearance-none bg-white px-2 py-2 pr-8 leading-tight",r.disabled?"border-none bg-transparent":"border border-gray-400 hover:border-gray-500 rounded shadow focus:outline-none focus:shadow-outline"]),name:s(t),id:s(t),value:s(l),disabled:r.disabled,placeholder:r.placeholder,onInput:y[0]||(y[0]=(...o)=>s(i)&&s(i)(...o)),onBlur:y[1]||(y[1]=(...o)=>s(m)&&s(m)(...o))},null,42,Ae)),O(e("span",{class:"help-message"},c(s(n)),513),[[A,s(n)||s(P).valid]])],2))}}),Ke=j(He,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/components/fields/experimental/TextElement.vue"]]),Ge={class:"datatable",id:"PeerSimpleRangeQuestion"},Je={key:0,class:"question"},Xe={key:1,class:"description text-sm mx-4 mb-2"},Ye={class:"standardtable"},Ze=e("thead",null,[e("tr",null,[e("th",null,[e("div",{class:""},"Peer")]),e("th",null,[e("div",{class:""},"Comments")])])],-1),et={style:{width:"20%"}},tt={style:{width:"80%"}},st=U({__name:"PeerSimpleCommentQuestion",props:{members:{type:Array,required:!0},form:{type:Object,required:!0},name:{type:String,required:!0},label:{type:String,required:!1},question:{type:String,required:!1},description:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1}},setup(r,{emit:v}){const t=r;return(w,l)=>(a(),u("div",Ge,[t.question?(a(),u("div",Je,c(t.question),1)):b("v-if",!0),t.description?(a(),u("div",Xe,c(t.description),1)):b("v-if",!0),e("table",Ye,[Ze,e("tbody",null,[(a(!0),u(E,null,R(t.members,(n,m)=>(a(),u("tr",{key:n.id},[e("td",et,[f(K,{member:n},null,8,["member"])]),e("td",tt,[f(Ke,{label:r.label,value:t.form[r.name][m],name:`${r.name}[${m}]`,placeholder:r.placeholder,disabled:t.disabled},null,8,["label","value","name","placeholder","disabled"])])]))),128))])])]))}}),nt=j(st,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/questions/PeerSimpleCommentQuestion.vue"]]),ot=e("p",{class:"text-sm leading-6 text-slate-900 my-auto mx-4"},"Based on how your instructor has setup this review, your teammates will eventually be allowed to see the following:",-1),rt=e("ul",{class:"list-disc list-inside text-sm leading-6 text-slate-900 ml-4 my-4"},[e("li",{class:"text-slate-900"},"The average of all the relative contribution ratings they received."),e("li",{class:"text-slate-900"},"The comments written about them, presented anonymously so they will not see who wrote what.")],-1),lt=U({__name:"TakeNote",setup(r){return(v,t)=>(a(),H(se,{subtitle:"Take note",icon:{src:s(ae),size:"3.25rem"}},{default:I(()=>[ot,rt]),_:1},8,["icon"]))}}),it=j(lt,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/components/TakeNote.vue"]]),at={class:"temp text-left"},dt={class:"text-xs text-blue-500"},ut={class:"text-xs text-blue-500"},ct={class:"text-xs text-blue-500"},mt=U({__name:"SimpleEvaluation",props:{action:{type:String,required:!0},_method:{type:String,required:!0},currentUser:{type:null,required:!0},evaluation:{type:null,required:!0}},setup(r,{emit:v}){const t=r,w=Y();Q({questions:[{id:"1",title:"Please rate each peer's relative contribution.",description:"points:: some description"},{id:"2",title:"Please provide overall comments about each peer.",description:"comments:: some description"}]});const l=T(t,"evaluation"),n=Q({event_id:q(()=>{var o;return(o=l.value)==null?void 0:o.id}),group_id:q(()=>{var o,d;return(d=(o=l.value)==null?void 0:o.group)==null?void 0:d.id}),course_id:q(()=>{var o,d;return(d=(o=l.value)==null?void 0:o.course)==null?void 0:d.id}),user_id:q(()=>{var o;return(o=t.currentUser)==null?void 0:o.id}),evaluatee_count:q(()=>{var o,d;return(d=(o=l.value)==null?void 0:o.members)==null?void 0:d.length}),member_ids:q(()=>{var o;return $.exports.map((o=l.value)==null?void 0:o.members,d=>d.id)})});q(()=>{var o,d,k,h;return(d=(o=l.value)==null?void 0:o.review)!=null&&d.response.length?(h=(k=l.value)==null?void 0:k.review)==null?void 0:h.response:{points:[],comments:[]}});const m=q(()=>{var o,d,k,h,x,_;return((d=(o=l.value)==null?void 0:o.review)==null?void 0:d.response)&&Object.keys((h=(k=l.value)==null?void 0:k.review)==null?void 0:h.response).length?s((_=(x=t.evaluation)==null?void 0:x.review)==null?void 0:_.response):{points:[],comments:[]}}),{handleSubmit:i,errors:P,values:S}=Z({initialValues:m.value});q(()=>{var o,d;return(d=(o=t.evaluation)==null?void 0:o.review)==null?void 0:d.response});const y=q(()=>w.path==="submissions");return(o,d)=>(a(),H(te,{ref:"evaluation_form",currentUser:r.currentUser,evaluation:s(l),form:s(m)},{header:I(()=>[f(C,{type:"hidden",name:"action",value:t.action},null,8,["value"]),f(C,{type:"hidden",name:"_method",value:t._method},null,8,["value"]),f(C,{type:"hidden",name:"event_id",value:n==null?void 0:n.event_id},null,8,["value"]),f(C,{type:"hidden",name:"group_id",value:n==null?void 0:n.group_id},null,8,["value"]),f(C,{type:"hidden",name:"course_id",value:n==null?void 0:n.course_id},null,8,["value"]),f(C,{type:"hidden",name:"data[Evaluation][evaluator_id]",value:n==null?void 0:n.user_id},null,8,["value"]),f(C,{type:"hidden",name:"evaluateeCount",value:n==null?void 0:n.evaluatee_count},null,8,["value"]),f(C,{type:"hidden",name:"memberIDs",value:n==null?void 0:n.member_ids},null,8,["value"])]),main:I(()=>{var k,h,x,_;return[f(Fe,{members:(k=t.evaluation)==null?void 0:k.members,form:s(S),name:"points",question:"1. Please rate each peer's relative contribution.",description:"just a points section description",disabled:s(y)},null,8,["members","form","disabled"]),e("div",at,[b('        <div class="text-xs text-red-500">total_points: {{ total_points }}</div>'),b('        <div class="text-xs text-red-500">slider_sum: {{ slider_sum }}</div>'),b('        <div class="text-xs text-red-500">student_slider: {{ student_slider }}</div>'),b('        <div class="text-xs text-red-500">student_scores: {{ student_scores }}</div>'),e("div",dt,"remaining: "+c((x=(h=t.evaluation)==null?void 0:h.review)==null?void 0:x.remaining),1),e("div",ut,"form.points: "+c(s(m).points),1),e("div",ct,"values.points: "+c(s(S).points),1)]),f(nt,{members:(_=t.evaluation)==null?void 0:_.members,form:s(m),name:"comments",question:"2. Please provide overall comments about each peer.",description:"just a comments section description",disabled:s(y)},null,8,["members","form","disabled"]),(a(!0),u(E,null,R(s(S).comments,(p,g)=>(a(),u("div",{class:"text-xs text-left text-blue-500 py-2 px-4",key:g},c(p),1))),128))]}),footer:I(()=>[f(it)]),action:I(({onSave:k})=>[ee(o.$slots,"cta",{onSave:k})]),_:3},8,["currentUser","evaluation","form"]))}}),kt=j(mt,[["__file","/Users/josephkh/Workspace/iPeer/app/webroot/vue-ts-ipeer/src/student/views/templates/SimpleEvaluation.vue"]]);export{kt as default};
//# sourceMappingURL=SimpleEvaluation.js.map
